<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Talent vs Luck 论文复现与分析 | SHIVAKASU</title><meta name="description" content="1 绪论1.1 原文内容简述 在 “Talent vs Luck: the role of randomness in success and failure” 这篇文章中，作者假设社会中人的才能服从正态分布，而人的资产服从长尾分布。作者使用数学模型模拟了运气因素在社会中的作用机制，建立人-事件-资产的交互模型量化了运气因素的作用效果。实验内容如下： 将1000个代表人类个体的点随机分布在一个二维"><meta name="keywords" content="Python"><meta name="author" content="w.k.x.,wkx1996@foxmail.com"><meta name="copyright" content="w.k.x."><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="https://file.shivakasu.cn/eb8581b76ec032ab0db8/favicon.ico"><link rel="canonical" href="https://shivakasu.cn/2018/11/28/work0/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="Talent vs Luck 论文复现与分析"><meta property="og:url" content="https://shivakasu.cn/2018/11/28/work0/"><meta property="og:site_name" content="SHIVAKASU"><meta property="og:description" content="1 绪论1.1 原文内容简述 在 “Talent vs Luck: the role of randomness in success and failure” 这篇文章中，作者假设社会中人的才能服从正态分布，而人的资产服从长尾分布。作者使用数学模型模拟了运气因素在社会中的作用机制，建立人-事件-资产的交互模型量化了运气因素的作用效果。实验内容如下： 将1000个代表人类个体的点随机分布在一个二维"><meta property="og:image" content="https://file.shivakasu.cn/2f6de001e698ed5939de/arg.jpg"><meta property="article:published_time" content="2018-11-28T10:41:20.000Z"><meta property="article:modified_time" content="2018-11-28T15:34:20.000Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="prev" title="NSGA-III 算法实现与测试" href="https://shivakasu.cn/2018/12/28/work1/"><link rel="next" title="解决 anaconda3 安装 xgboost：/usr/lib/libstdc++.so.6：version 'GLIBCXX_3.4.14' not found问题" href="https://shivakasu.cn/2017/07/01/bugfix0/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: {"languages":{"author":"作者: w.k.x.","link":"链接: ","source":"来源: SHIVAKASU","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: true    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true
  }</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="SHIVAKASU" type="application/atom+xml">
</head><body><canvas class="fireworks"></canvas><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://file.shivakasu.cn/cb7049104af4685e7289/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">46</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">19</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">6</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fa fa-book"></i><span> Book</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-绪论"><span class="toc-text">1 绪论</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-原文内容简述"><span class="toc-text">1.1 原文内容简述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-实验缺陷"><span class="toc-text">1.2 实验缺陷</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-1-假设简单"><span class="toc-text">1.2.1 假设简单</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-2-结论草率"><span class="toc-text">1.2.2 结论草率</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-实验设计"><span class="toc-text">2 实验设计</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-模型界面"><span class="toc-text">2.1 模型界面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-实验内容"><span class="toc-text">2.2 实验内容</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1-无额外假设"><span class="toc-text">2.2.1 无额外假设</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2-抵抗力模式"><span class="toc-text">2.2.2 抵抗力模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-3-能力决定模式"><span class="toc-text">2.2.3 能力决定模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-4-工资模式"><span class="toc-text">2.2.4 工资模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-5-钱运合一模式"><span class="toc-text">2.2.5 钱运合一模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-6-税收模式"><span class="toc-text">2.2.6 税收模式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-总结"><span class="toc-text">3 总结</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-源码"><span class="toc-text">4 源码</span></a></li></ol></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://file.shivakasu.cn/2f6de001e698ed5939de/arg.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">SHIVAKASU</a></span><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fa fa-book"></i><span> Book</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">Talent vs Luck 论文复现与分析</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2018-11-28 18:41:20"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2018-11-28</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2018-11-28 23:34:20"><i class="fas fa-history fa-fw"></i> 更新于 2018-11-28</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/">编程实践</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta__icon"></i><span>字数总计:</span><span class="word-count">6k</span><span class="post-meta__separator">|</span><i class="far fa-clock fa-fw post-meta__icon"></i><span>阅读时长: 25 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="far fa-comments fa-fw post-meta__icon"></i><span>评论数:</span><a href="/2018/11/28/work0/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2018/11/28/work0/" itemprop="commentCount"></span></a></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="1-绪论"><a href="#1-绪论" class="headerlink" title="1 绪论"></a>1 绪论</h1><h2 id="1-1-原文内容简述"><a href="#1-1-原文内容简述" class="headerlink" title="1.1 原文内容简述"></a>1.1 原文内容简述</h2><ul>
<li>在 “Talent vs Luck: the role of randomness in success and failure” 这篇文章中，作者假设社会中人的才能服从正态分布，而人的资产服从长尾分布。作者使用数学模型模拟了运气因素在社会中的作用机制，建立人-事件-资产的交互模型量化了运气因素的作用效果。实验内容如下：</li>
<li>将1000个代表人类个体的点随机分布在一个二维空间中，实验模拟环境示意图如下。人类个体不会移动、重生或死亡。在模拟程序初始化时，为每个人类个体分配相同的资产值 $C = 10$ 。每个人类个体分配一个才能参数 $T$ ， $T$ 服从参数 $\mu = 0.6$ 、 $\sigma = 0.1$ 的正态分布。才能值一旦确定终生不可变化，由于正态分布中会出现小于0和大于1的值，在此将所有小于0的值一律改为0，将所有大于1的值一律改为1，确保 $T$ 值在 $[0,1]$ 范围内。</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/ab268add912677a4c5f3/origin.jpg" alt="实验模拟环境示意图"></p>
<ul>
<li>一次模拟相当于40年的社会演化，代表人类个体由20岁到60岁的历程。将一次模拟分成80次迭代过程，一次迭代表示6个月的演化。每一次迭代开始前，初始化500个幸运事件和500个不幸事件随机分布在地图中，如上图，其中绿色的点代表幸运事件，红色的点代表不幸事件。</li>
<li>当个体遇到幸运事件，即绿色的点出现在个体点的附近时，通过随机数与才能值的比较决定资产是否翻倍，公式如下：<script type="math/tex; mode=display">C_{t+1}=2C_t\;,\quad if\; rand[0,1]<T</script></li>
<li>当个体遇到不幸事件，即红色的点出现在个体点的附近时，资产值立即减半，公式如下：<script type="math/tex; mode=display">C_{t+1}=0.5C_t</script></li>
<li>实验结果如下，尽管人类个体的才能服从正态分布，但经过40年的模拟演变后，人类个体的资产值呈现出高度的不对称性，且符合帕累托法则。才能最高的个体最终资产值仅处于中间位置，而资产值最高的个体的才能值也仅处于中等水平。这一结果证明了当前社会是非精英化的，运气因素对于个体的成功起到重要作用。</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/dedd11b8e432afc36cfb/ores.png" alt="资产-个体分布图"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/00a84f153060c064be84/ores2.png" alt="资产-才能分布图"></p>
<h2 id="1-2-实验缺陷"><a href="#1-2-实验缺陷" class="headerlink" title="1.2 实验缺陷"></a>1.2 实验缺陷</h2><h3 id="1-2-1-假设简单"><a href="#1-2-1-假设简单" class="headerlink" title="1.2.1 假设简单"></a>1.2.1 假设简单</h3><ul>
<li>整个模拟实验建立在诸多假设条件下。有些假设是基于统计数据的，如个体才能服从正态分布以及个体资产服从长尾分布。但仍有部分假设缺少理论或事实支持，同时作者并未解释做出这些假设的原因，仅仅是作为默认条件避而不谈，部分列举如下：<ul>
<li>为什么选择正方形的二维空间作为模拟环境？</li>
<li>为什么不考虑初始资产值的分布，一律初始为10？</li>
<li>为什么资产的变化仅与幸运事件和不幸事件有关？</li>
<li>为什么资产的变化方式只能是翻倍和减半？</li>
<li>为什么作者相信个体在幸运事件中增加资产要靠才能，却不相信个体在不幸事件中能够依靠才能避免资产减少？</li>
</ul>
</li>
</ul>
<h3 id="1-2-2-结论草率"><a href="#1-2-2-结论草率" class="headerlink" title="1.2.2 结论草率"></a>1.2.2 结论草率</h3><ul>
<li>文章中仅展示了一组参数条件下模型的结果，以此断定模型准确模拟了真实世界的情况，这样的结论是不具有说服力的。更为合理的做法是改变模型参数，如才能值正态分布的参数、幸运事件与不幸事件的比例、初始资产的值等等，进行多次试验，综合不同参数条件下的实验结果评价模型的模拟能力。</li>
</ul>
<h1 id="2-实验设计"><a href="#2-实验设计" class="headerlink" title="2 实验设计"></a>2 实验设计</h1><h2 id="2-1-模型界面"><a href="#2-1-模型界面" class="headerlink" title="2.1 模型界面"></a>2.1 模型界面</h2><ul>
<li>本文使用 python 语言对原文模型进行复现，模型界面如下。包含参数设置区、图表选择区、时序滑块和图表展示区四部分。 GUI 部分由 PyQt 库实现，图表部分由 pyecharts 库实现，代码见文末。</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/21a16dd33749a9e3ef02/interface.png" alt="模型界面"></p>
<ul>
<li>参数设置区用于设置模型参数，包括地图规模、人数、幸运事件数量、不幸事件数量、迭代次数、才能值分布的均值和方差、图表粒度。其中图表粒度表示柱状图中划分的区间个数。</li>
<li>图表选择区用于选择展示的图表，包括才能-个体柱状图 (T-N) 、幸运事件-个体柱状图 (L-N) 、资产-个体柱状图 (C-N) 、资产-才能散点图 (C-T) 、才能-资产散点图 (T-C) 、幸运事件-资产散点图 (L-C) 、资产-幸运事件散点图 (C-L) 、不幸事件-资产散点图 (U-C) 、资产-不幸事件散点图 (C-U) 、资产最高者-时间折线图 (Cmax-Time) 、资产最高者-事件折线图 (Cmax-Event) 。</li>
<li>时序滑块用于选择某一次迭代后的图表。为了观察图表中两个变量的演变规律，程序在每一次迭代后绘制一份统计图，通过时序滑块进行选择。</li>
<li>图表展示区用于显示指定的某一类型、某一次迭代对应的统计图。</li>
</ul>
<h2 id="2-2-实验内容"><a href="#2-2-实验内容" class="headerlink" title="2.2 实验内容"></a>2.2 实验内容</h2><ul>
<li>考虑到对真实世界的准确模拟十分困难，原文的模型设计过于简陋，而本人又没有学习过社会学方面的知识，因此不对原文模型进行大幅度的改进。此外，模型涉及的参数较多，想要准确把握每个参数对模型能力的影响需要进行大量的对比实验，难以操作。因此实验内容定为继承原文的模型设计，分别增加额外的假设条件，观察模型的模拟结果。</li>
</ul>
<h3 id="2-2-1-无额外假设"><a href="#2-2-1-无额外假设" class="headerlink" title="2.2.1 无额外假设"></a>2.2.1 无额外假设</h3><ul>
<li>本次实验不对原文实验条件做改变。模拟参数及结果如下。</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/f1732f8af31c82f08eca/tn1.png" alt="才能-个体柱状图"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/46c0250192987ccf7e06/cn1.png" alt="资产-个体柱状图"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/c39c8a012445fc976a88/ct1.png" alt="资产-才能散点图"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/79ea2456499fd9e03590/cl1.png" alt="资产-幸运事件散点图"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/0afbceb09164355e79e3/cu1.png" alt="资产-不幸事件散点图"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/890e52c09ec914f3ad0f/Cmaxe2.png" alt="资产最高者-事件折线图"></p>
<ul>
<li>根据才能-个体柱状图，个体才能值符合均值为0.6、标准差为0.1的正态分布。</li>
<li>根据资产-个体柱状图，资产值在122.88左右的有980人，资产值在384左右的有8人，资产值在640左右的有3人，资产值在1152左右的有3人，资产值在2432左右的有1人，资产值在4992左右的有3人，资产值在10112左右的有2人。计算表明，80%的个体占有者59.04%的资产，虽然贫富差距明显，但没有达到帕累托法则的8:2的比例。</li>
<li>根据资产-才能散点图，在资产值较低的群体中，才能值分布均匀。而对于资产值较高的少数个体，虽然其才能值不是最高的，但均是处于中上游的。</li>
<li>根据资产-幸运事件散点图、资产-不幸事件散点图和资产最高者-事件折线图，可以总结资产最高者的特征，即自身才能值较高，相对遇到更多的幸运事件和更少的不幸事件。在这之中才能和运气都起到了重要作用。</li>
<li>值得注意的是，由于贫富差距明显，资产值方差较大，使得柱状图由于等距划分区间而呈现出畸形状态，不易理解。因此对资产值进行以2为底的对数变换，重新绘制统计图，结果如下。</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/b353d8b71d10ada00f2f/logn1.png" alt="对数资产-个体柱状图"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/666dde68de7c9519f6bb/logt1.png" alt="对数资产-才能散点图"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/1bba50decb8e183361f9/logl1.png" alt="对数资产-幸运事件散点图"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/e29f33f8e7599bd4af10/logu1.png" alt="对数资产-不幸事件散点图"></p>
<ul>
<li>根据对数资产-个体柱状图，对数资产值的分布表现出正态分布的特征。这仅是对统计图直接观察的结果，以我所掌握的数学技巧不足以计算或证明对数资产值的真实分布。</li>
<li>根据对数资产-才能散点图、对数资产-幸运事件散点图，对数资产值与才能值和幸运事件数的关系并不明显。而根据对数资产-不幸事件散点图，对数资产值与不幸事件数存在较明显的线性关系，对比幸运事件和不幸事件中的资产变化公式，可知是由于不幸事件中资产值的无条件减半使得不幸事件对资产值的影响力高于幸运事件。</li>
</ul>
<h3 id="2-2-2-抵抗力模式"><a href="#2-2-2-抵抗力模式" class="headerlink" title="2.2.2 抵抗力模式"></a>2.2.2 抵抗力模式</h3><ul>
<li>考虑一定程度上减小上述实验中幸运事件与不幸事件对资产值影响力的差距，本次实验中，根据个体自身才能值使个体具有一定能力避免在不幸事件中损失资产，类比在幸运事件中的资产增加公式，在不幸事件中的资产减少公式定义为：<script type="math/tex; mode=display">C_{t+1}=0.5C_t\;,\quad if\; rand[0,1]>T</script>模拟参数及结果如下：</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/8d9d653e7ae918f6c599/cn2.png" alt="资产-个体柱状图"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/d9d558e60a55cda985b8/ct2.png" alt="资产-才能散点图"></p>
<ul>
<li>根据资产-个体柱状图，资产值在245.76左右的有989人，资产值在768左右的有2人，资产值在1280左右的有2人，资产值在2304左右的有3人，资产值在4864左右的有2人，资产值在9984左右的有1人，资产值在20224左右的有1人。计算表明，80%的个体占有者66.87%的资产。</li>
<li>根据资产-才能散点图，分布规律没有明显改变，资产值较高的少数个体才能值仍处于中上游的。</li>
<li>将资产值做对数变换后，模拟结果如下。对比2.2.1节的模拟结果，显然不幸事件与对数资产值的线性关系有所减弱，表明个体对不幸事件具有抵抗力后，不幸事件对资产值的影响力得以减小。但此时对比下面两图，发现不幸事件对资产值的影响力仍高于幸运事件对资产值的影响力，这一现象在本次实验中无法解释，需要进一步研究。</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/37ed9f74ccfe4cbec149/logl2.png" alt="对数资产-幸运事件散点图"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/25e11c00358c0f7878c9/logu2.png" alt="对数资产-不幸事件散点图"></p>
<ul>
<li>在抵抗力模式中，由于个体具有了避免资产损失的可能性，因此总体的资产值水平有所上升。但贫富差距并没有明显降低，因为资产值较高的少数个体才能值均为中上游，在不幸事件中的抵抗力也是相对较强的。同时，模拟结果对实验方向产生了新的启发，即不仅研究运气因素对资产值的影响，还需要进一步研究幸运与不幸两种运气成分影响力的区别。</li>
</ul>
<h3 id="2-2-3-能力决定模式"><a href="#2-2-3-能力决定模式" class="headerlink" title="2.2.3 能力决定模式"></a>2.2.3 能力决定模式</h3><ul>
<li>本次实验中，不以才能值作为概率阈值，资产值的变化方式不再是简单的翻倍和减半，而是直接与才能值相关。在幸运事件中资产值的变化公式定义为：<script type="math/tex; mode=display">C_{t+1}=(1+T)C_t</script>在不幸事件中资产值的变化公式定义为：<script type="math/tex; mode=display">C_{t+1}=TC_t</script>模拟参数及结果如下：</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/9443ce370f863563f365/cn3.png" alt="资产-个体柱状图"></p>
<ul>
<li>根据资产-个体柱状图，资产值在5.213左右的有987人，资产值在16.2905左右的有2人，资产值在27.151左右的有4人，资产值在38.0115左右的有2人，资产值在92.314左右的有2人，资产值在103.1745左右的有1人，资产值在222.64左右的有1人，资产值在428.989左右的有1人。计算表明，80%的个体占有者84.41%的资产。</li>
<li>将资产值做对数变换后，模拟结果如下。对比2.2.1节的模拟结果，发现才能值与对数资产值之间产生了比较明显的正相关关系，表明在才能值直接参与资产变化公式时，才能值对资产值的影响力得到增强。</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/1f6d4f75eaa078f3e0b3/logt3.png" alt="对数资产-才能散点图"></p>
<ul>
<li>在能力决定模式中，贫富差距有了明显的缩小。从才能值的平均水平0.6来理解，才能值直接影响资产变化，减小了资产值的增长幅度，同时也减小了资产值的损失比例，有效地抑制了贫富差距向两端扩张。但从个体来看，对于资产值最高的是的少数个体，由于才能值处于中上游，资产值可以保证稳定增长，而对于才能值低于平均水平的个体，资产的减少幅度要大于资产的增长幅度，从而呈现出资产不断减少的趋势。因此能力决定模式的缺陷是对弱势群体没有足够的保障。</li>
</ul>
<h3 id="2-2-4-工资模式"><a href="#2-2-4-工资模式" class="headerlink" title="2.2.4 工资模式"></a>2.2.4 工资模式</h3><ul>
<li>在真实世界中，幸运事件与不幸事件只是影响资产变化的诸多因素之一。在日常生活中，人们的资产变化通常是由于工作带来的工资收入。因此在本次实验中为每个个体增加一个额外参数 (\omega) ，表示个体的工作强度，工作强度服从均值为5、标准差为1的正态分布，工作强度与才能值的乘积作为该个体的工资收入，在每次迭代中都加入资产值，公式如下：<script type="math/tex; mode=display">C_{t+1}=C_t+\omega T</script>模拟参数及结果如下：</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/317f31bc95e8336f21cd/cn4.png" alt="资产-个体柱状图"></p>
<ul>
<li>根据资产-个体柱状图，资产值在1581.4865左右的有995人，资产值在4941.4615左右的有2人，资产值在11529.6485左右的有1人，资产值在14823.472左右的有1人，资产值在130117.0135左右的有1人。计算表明，80%的个体占有者72.71%的资产。</li>
<li>将资产值做对数变换后，模拟结果如下。对比2.2.1节的模拟结果，发现不幸事件数与对数资产值之间的线性关系得到削弱，表明一定的工资收入也能够减小不幸事件对资产值的影响力，与2.2.2节的抵抗力模式有异曲同工之处，且工资模式的作用效果明显强于抵抗力模式。</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/be84e5e567e02fd7d3a5/logu4.png" alt="对数资产-不幸事件散点图"></p>
<ul>
<li>直观上理解，加入了工作强度这一因素，使得个体同样具有了应对不幸事件中资产损失的抵抗了，与抵抗力模式不同的是，工资模式相对弱化了才能值的决定作用，即使才能值较低的个体也可通过具备较高的工作强度来提高工资水平，相当于具备在低谷时期反弹逆袭的能力。</li>
</ul>
<h3 id="2-2-5-钱运合一模式"><a href="#2-2-5-钱运合一模式" class="headerlink" title="2.2.5 钱运合一模式"></a>2.2.5 钱运合一模式</h3><ul>
<li>原文中默认所有个体遭遇幸运事件和不幸事件的概率相同，而本次实验中将考虑另一种情况，即资产值较高者遇到幸运事件的概率相对较高，资产值较低者遇到不幸事件的概率相对较高。在进行程序设计时将遇到事件的概率量化为个体的事件感知范围，对于资产值高于平均水平的个体，幸运事件的感知范围扩大到以自身为中心的2x2正方形区域，对于资产值低于平均水平的个体，不幸事件的感知范围扩大到以自身为中心的2x2正方形区域。模拟参数及结果如下。</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/73e750f6cf6bb626fefd/cn5.png" alt="资产-个体柱状图"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/a3fc117872998fdf3920/cl5.png" alt="资产-幸运事件散点图"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/6afe1575a0473b20210e/cu5.png" alt="资产-不幸事件散点图"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/d9700582089ca2b3c36b/ce5.png" alt="资产最高者-事件折线图"></p>
<ul>
<li>根据资产-个体柱状图，资产值在15.36左右的有998人，资产值在624左右的有1人，资产值在1264左右的有1人。计算表明，80%的个体占有者71.37%的资产。</li>
<li>根据资产-幸运事件散点图和资产-不幸事件散点图，资产值较高的少数个体更依赖于运气因素。他们遇到幸运事件的次数不再只是在中上游位置，而是遇到幸运事件次数最多的几个人。同样，他们遇到不幸事件的次数也不再只是在中下游位置，而是遇到不幸事件次数最少的几个人。</li>
<li>根据资产最高者-事件散点图，也可以看出资产最高的人更依赖运气因素。相比于前几次实验的资产最高者，该个体遇到了更多的幸运事件和更少的不幸事件。</li>
<li>将资产值做对数变换后，模拟结果如下。根据对数资产-幸运事件散点图，幸运事件数与对数资产值的整体关系仍不明显，但对于资产值较高的少数个体，其幸运事件数与对数资产值之间存在明显的正相关关系。根据对数资产-不幸事件散点图，不幸事件数与对数资产值之间仍存在明显的正相关关系，且对比2.2.1节的模拟结果，钱运合一模式下的正相关关系表现更强。</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/08beda06344f2d3e2777/logl5.png" alt="对数资产-幸运事件散点图"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/6a1c37d3e32a8feed72a/logu5.png" alt="对数资产-不幸事件散点图"></p>
<ul>
<li>在钱运合一模式中，将运气与资产值绑定，强化了运气因素在资产值变化中的决定性作用。</li>
</ul>
<h3 id="2-2-6-税收模式"><a href="#2-2-6-税收模式" class="headerlink" title="2.2.6 税收模式"></a>2.2.6 税收模式</h3><ul>
<li>考虑强制收税可作为减小贫富差距的有力手段，本次实验中将根据个体的资产值情况，在个体遇到幸运事件资产增长时收取不同的税款。税收规则定为：资产值前10%的个体收取50%的税款，资产值前50%的个体收取30%的税款，其余个体收取10%的税款，税收公式如下：<script type="math/tex; mode=display">C_{t+1}=\begin{cases}
1.5C_t & C_t\in top10\% \\
1.7C_t & C_t\in top50\% \\
1.9C_t & others \\
\end{cases}</script></li>
</ul>
<p>模拟参数及结果如下:</p>
<p><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/0e492a1355bf6062d93d/cn6.png" alt="资产-个体柱状图"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/0d013d46d2c797cd5362/ct6.png" alt="资产-才能散点图"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/daa25edcbd4278269976/cl6.png" alt="资产-幸运事件散点图"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/5f40079b22ee77406665/ce6.png" alt="资产最高者-事件折线图"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/1c79e28e4b30786b4f44/logl6.png" alt="对数资产-幸运事件散点图"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/6733debff67a47dbf7e7/logu6.png" alt="对数资产-不幸事件散点图"></p>
<ul>
<li>根据资产-个体柱状图，资产值在0.0259左右的有996人，资产值在0.0273左右的有1人，资产值在0.0298左右的有1人，资产值在0.674左右的有1人，资产值在2.135左右的有1人。计算表明，80%的个体占有者72.29%的资产。</li>
<li>根据资产-才能事件散点图和对数资产-才能事件散点图，可以看到在税收模式下，资产最高者的才能不再高于平均水平，而是处于中下游位置。</li>
<li>根据资产-幸运事件散点图和对数资产-幸运事件散点图，可以看到在税收模式下，资产最高者遇到幸运事件的次数也不再高于平均水平，甚至接近于次数最低。</li>
<li>根据资产最高者-时间折线图，资产最高者的资产变化不再呈上升趋势，而是呈现出高峰后不断被削减的趋势。</li>
<li>经过多次模拟结果大同小异，显然，加入税收规则对资产的变化规律产生了巨大的影响。首先，税收对资产值有很强的抑制作用，整个群体的资产值都远远小于初始资产值。其次，税收减小了才能和运气对资产的影响力，资产值较高的少数个体都不是在才能和运气上占优势的人，甚至处于偏弱势的地位。尽管如此，根据对数资产-不幸事件散点图，不幸事件的影响力并没有得到十分明显的削弱。</li>
</ul>
<h1 id="3-总结"><a href="#3-总结" class="headerlink" title="3 总结"></a>3 总结</h1><ul>
<li>经过上述实验，可以看出原文中三位作者得出的结论其实并不严谨。</li>
<li>首先，贫富差距确实存在，每一次的资产-个体柱状图都是如此畸形，但资产值奇高的毕竟只是少数几个个体，因为我们无法避免在此种随机条件下一个群体中总有几个运气极好的人存在。我不认为这是严格的贫富差距，贫富差距应该是一个大的社会群体中几个小的社会群体之间资产值的明显差距。但本次实验得到的结论仅仅是群体中存在几个资产值奇高的个体，仅仅是因为他们的才能值略高于平均水平，他们有幸遇到了更多的幸运事件和更少的不幸事件。</li>
<li>其次，帕累托法则不是铁律。经过多次实验，虽然存在贫富差距，但远没有帕累托法则的8:2一般悬殊的差距。二八定律仅仅是一个模糊的统计结果，在分析具体问题时没有太大的参考价值，它仅仅是提供了一个社会学启示，告诉人们要分清主要矛盾和次要矛盾。因此模拟结果符合二八定律不足以证明模型的准确度，我甚至怀疑原文作者是经过千挑万选找到了某一次符合二八定律的结果并附在文章中。</li>
<li>最后，该实验也无法证明运气抑或才能的决定性作用。通过上述实验可以看出，仅仅额外添加一个貌似合理的假设，就能或多或少地改变运气和才能的影响力。这归因于模型设计的简陋，它包含了太少的假设，仅有的这些假设也不具有很强的说服力，而除此之外仍有太多太多需要考虑的因素，如真实世界中的资产继承、社会保障、债务等等。正是由于无法考虑并量化这些因素，才使得当前的模型如此脆弱。在这个简单的模型中，显然是放大了运气因素的作用力，因此原文作者否定精英社会的理由也不成立。在这个模型中无法形成精英社会的原因是精英个体数太少，当运气的作用力被放大时，最幸运的个体往往出现在个体偏集中的中游位置，最终导致资产最高者往往是才能值略高于平均水平的个体。</li>
<li>原文提出了一个很好的想法，即研究运气因素在资产变化过程中的影响力。但其实验思路、实验模型、实验结果缺少社会学和经济学的理论支持，以至于连我这个毫无社会学和经济学基础的人也无法相信。期待作者后续的工作。</li>
</ul>
<h1 id="4-源码"><a href="#4-源码" class="headerlink" title="4 源码"></a>4 源码</h1><ul>
<li>编程环境：python3.6.4 + pyqt5.6.0 + pyecharts0.5.11</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-  </span></span><br><span class="line"><span class="keyword">import</span> sys,random,os</span><br><span class="line"><span class="keyword">from</span> copy <span class="keyword">import</span> deepcopy</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> pyecharts <span class="keyword">import</span> Bar,Scatter,Line</span><br><span class="line"><span class="keyword">from</span> PyQt5 <span class="keyword">import</span> QtCore, QtGui</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">from</span> PyQt5.QtWebKitWidgets <span class="keyword">import</span> QWebView <span class="keyword">as</span> QView</span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    some pyqt5 version only support QtWebKitWidgets, some only support QtWebEngineWidgets.</span></span><br><span class="line"><span class="string">    i dont know why. so just change the import when occur error.</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="keyword">from</span> PyQt5.QtWebEngineWidgets <span class="keyword">import</span> QWebEngineView <span class="keyword">as</span> QView</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> QApplication, QWidget, QMessageBox, QPushButton, QGridLayout, QLabel, QComboBox, QFrame, QVBoxLayout, QSlider, QGraphicsView</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TVL</span><span class="params">(QWidget)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,parent=None)</span>:</span></span><br><span class="line">        QWidget.__init__(self)</span><br><span class="line">        self.capitalLog = []</span><br><span class="line">        self.luckyLog = []</span><br><span class="line">        self.unluckyLog = []</span><br><span class="line">        self.lucky = []</span><br><span class="line">        self.unlucky = []</span><br><span class="line">        self.capital = []</span><br><span class="line">        self.sitex = []</span><br><span class="line">        self.sitey = []</span><br><span class="line">        self.talent = []</span><br><span class="line">        self.displayTarget = <span class="string">""</span></span><br><span class="line">        self.epochs = <span class="number">0</span></span><br><span class="line">        self.displayGrand = <span class="number">0</span></span><br><span class="line">        self.outdir = <span class="string">"file:///"</span>+os.getcwd().replace(<span class="string">'\\'</span>,<span class="string">'/'</span>)+<span class="string">"/data/"</span></span><br><span class="line">        self.setWindowTitle(<span class="string">'Talent vs Luck'</span>)</span><br><span class="line">        self.setWindowIcon(QtGui.QIcon(<span class="string">'title.ico'</span>))</span><br><span class="line">        self.resize(<span class="number">851</span>, <span class="number">535</span>)</span><br><span class="line">        self.setMinimumSize(<span class="number">851</span>, <span class="number">535</span>)</span><br><span class="line">        self.setMaximumSize(<span class="number">851</span>, <span class="number">535</span>)</span><br><span class="line">        self.gridLayoutWidget = QWidget(self)</span><br><span class="line">        self.gridLayoutWidget.setGeometry(QtCore.QRect(<span class="number">10</span>, <span class="number">10</span>, <span class="number">191</span>, <span class="number">511</span>))</span><br><span class="line">        self.gridLayout_2 = QGridLayout(self.gridLayoutWidget)</span><br><span class="line">        self.gridLayout_2.setContentsMargins(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        self.M_lab = QLabel(<span class="string">"地图规模"</span>,self.gridLayoutWidget)</span><br><span class="line">        self.M_lab.setAlignment(QtCore.Qt.AlignCenter)</span><br><span class="line">        self.gridLayout_2.addWidget(self.M_lab, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">        self.T_avg = QComboBox(self.gridLayoutWidget)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">10</span>):</span><br><span class="line">            self.T_avg.addItem(str(i/<span class="number">10</span>))</span><br><span class="line">        self.gridLayout_2.addWidget(self.T_avg, <span class="number">5</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">        self.avg_lab = QLabel(<span class="string">"talent均值"</span>,self.gridLayoutWidget)</span><br><span class="line">        self.avg_lab.setAlignment(QtCore.Qt.AlignCenter)</span><br><span class="line">        self.gridLayout_2.addWidget(self.avg_lab, <span class="number">5</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">        self.T_std = QComboBox(self.gridLayoutWidget)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">10</span>):</span><br><span class="line">            self.T_std.addItem(str(i/<span class="number">10</span>))</span><br><span class="line">        self.gridLayout_2.addWidget(self.T_std, <span class="number">6</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">        self.std_lab = QLabel(<span class="string">"talent标准差"</span>,self.gridLayoutWidget)</span><br><span class="line">        self.std_lab.setAlignment(QtCore.Qt.AlignCenter)</span><br><span class="line">        self.gridLayout_2.addWidget(self.std_lab, <span class="number">6</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">        self.grand_lab = QLabel(<span class="string">"图表粒度"</span>,self.gridLayoutWidget)</span><br><span class="line">        self.grand_lab.setAlignment(QtCore.Qt.AlignCenter)</span><br><span class="line">        self.gridLayout_2.addWidget(self.grand_lab, <span class="number">7</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">        self.grand = QComboBox(self.gridLayoutWidget)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">5</span>):</span><br><span class="line">            self.grand.addItem(str(i*<span class="number">10</span>))</span><br><span class="line">        self.gridLayout_2.addWidget(self.grand, <span class="number">7</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">        self.luck = QComboBox(self.gridLayoutWidget)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">10</span>):</span><br><span class="line">            self.luck.addItem(str(i*<span class="number">100</span>))</span><br><span class="line">        self.gridLayout_2.addWidget(self.luck, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">        self.step = QComboBox(self.gridLayoutWidget)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">7</span>):</span><br><span class="line">            self.step.addItem(str(i*<span class="number">50</span>))</span><br><span class="line">        self.gridLayout_2.addWidget(self.step, <span class="number">4</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">        self.map = QComboBox(self.gridLayoutWidget)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">7</span>):</span><br><span class="line">            self.map.addItem(str(i*<span class="number">100</span>)+<span class="string">"x"</span>+str(i*<span class="number">100</span>))</span><br><span class="line">        self.gridLayout_2.addWidget(self.map, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">        self.unluck = QComboBox(self.gridLayoutWidget)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">10</span>):</span><br><span class="line">            self.unluck.addItem(str(i*<span class="number">100</span>))</span><br><span class="line">        self.gridLayout_2.addWidget(self.unluck, <span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">        self.N_lab = QLabel(<span class="string">"人数"</span>,self.gridLayoutWidget)</span><br><span class="line">        self.N_lab.setAlignment(QtCore.Qt.AlignCenter)</span><br><span class="line">        self.gridLayout_2.addWidget(self.N_lab, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">        self.unluck_lab = QLabel(<span class="string">"不幸事件"</span>,self.gridLayoutWidget)</span><br><span class="line">        self.unluck_lab.setAlignment(QtCore.Qt.AlignCenter)</span><br><span class="line">        self.gridLayout_2.addWidget(self.unluck_lab, <span class="number">3</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">        self.luck_lab = QLabel(<span class="string">"幸运事件"</span>,self.gridLayoutWidget)</span><br><span class="line">        self.luck_lab.setAlignment(QtCore.Qt.AlignCenter)</span><br><span class="line">        self.gridLayout_2.addWidget(self.luck_lab, <span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">        self.s_lab = QLabel(<span class="string">"迭代次数"</span>,self.gridLayoutWidget)</span><br><span class="line">        self.s_lab.setAlignment(QtCore.Qt.AlignCenter)</span><br><span class="line">        self.gridLayout_2.addWidget(self.s_lab, <span class="number">4</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">        self.N = QComboBox(self.gridLayoutWidget)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">7</span>):</span><br><span class="line">            self.N.addItem(str(i*<span class="number">500</span>))</span><br><span class="line">        self.gridLayout_2.addWidget(self.N, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">        self.line = QFrame(self)</span><br><span class="line">        self.line.setGeometry(QtCore.QRect(<span class="number">210</span>, <span class="number">10</span>, <span class="number">20</span>, <span class="number">511</span>))</span><br><span class="line">        self.line.setFrameShape(QFrame.VLine)</span><br><span class="line">        self.line.setFrameShadow(QFrame.Sunken)</span><br><span class="line">        self.line_2 = QFrame(self)</span><br><span class="line">        self.line_2.setGeometry(QtCore.QRect(<span class="number">340</span>, <span class="number">10</span>, <span class="number">20</span>, <span class="number">511</span>))</span><br><span class="line">        self.line_2.setFrameShape(QFrame.VLine)</span><br><span class="line">        self.line_2.setFrameShadow(QFrame.Sunken)</span><br><span class="line">        self.verticalLayoutWidget = QWidget(self)</span><br><span class="line">        self.verticalLayoutWidget.setGeometry(QtCore.QRect(<span class="number">230</span>, <span class="number">10</span>, <span class="number">101</span>, <span class="number">511</span>))</span><br><span class="line">        self.verticalLayout_2 = QVBoxLayout(self.verticalLayoutWidget)</span><br><span class="line">        self.verticalLayout_2.setContentsMargins(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        self.start = QPushButton(<span class="string">"Start"</span>,self.verticalLayoutWidget)</span><br><span class="line">        self.verticalLayout_2.addWidget(self.start)</span><br><span class="line">        self.TN = QPushButton(<span class="string">"T-N"</span>,self.verticalLayoutWidget)</span><br><span class="line">        self.verticalLayout_2.addWidget(self.TN)</span><br><span class="line">        self.LN = QPushButton(<span class="string">"L-N"</span>,self.verticalLayoutWidget)</span><br><span class="line">        self.verticalLayout_2.addWidget(self.LN)</span><br><span class="line">        self.CN = QPushButton(<span class="string">"C-N"</span>,self.verticalLayoutWidget)</span><br><span class="line">        self.verticalLayout_2.addWidget(self.CN)</span><br><span class="line">        self.CT = QPushButton(<span class="string">"C-T"</span>,self.verticalLayoutWidget)</span><br><span class="line">        self.verticalLayout_2.addWidget(self.CT)</span><br><span class="line">        self.TC = QPushButton(<span class="string">"T-C"</span>,self.verticalLayoutWidget)</span><br><span class="line">        self.verticalLayout_2.addWidget(self.TC)</span><br><span class="line">        self.LC = QPushButton(<span class="string">"L-C"</span>,self.verticalLayoutWidget)</span><br><span class="line">        self.verticalLayout_2.addWidget(self.LC)</span><br><span class="line">        self.CL = QPushButton(<span class="string">"C-L"</span>,self.verticalLayoutWidget)</span><br><span class="line">        self.verticalLayout_2.addWidget(self.CL)</span><br><span class="line">        self.UC = QPushButton(<span class="string">"U-C"</span>,self.verticalLayoutWidget)</span><br><span class="line">        self.verticalLayout_2.addWidget(self.UC)</span><br><span class="line">        self.CU = QPushButton(<span class="string">"C-U"</span>,self.verticalLayoutWidget)</span><br><span class="line">        self.verticalLayout_2.addWidget(self.CU)</span><br><span class="line">        self.CmaxTime = QPushButton(<span class="string">"Cmax-Time"</span>,self.verticalLayoutWidget)</span><br><span class="line">        self.verticalLayout_2.addWidget(self.CmaxTime)</span><br><span class="line">        self.CmaxEvent = QPushButton(<span class="string">"Cmax-Event"</span>,self.verticalLayoutWidget)</span><br><span class="line">        self.verticalLayout_2.addWidget(self.CmaxEvent)</span><br><span class="line">        self.verticalLayoutWidget_2 = QWidget(self)</span><br><span class="line">        self.verticalLayoutWidget_2.setGeometry(QtCore.QRect(<span class="number">360</span>, <span class="number">10</span>, <span class="number">471</span>, <span class="number">511</span>))</span><br><span class="line">        self.verticalLayout_3 = QVBoxLayout(self.verticalLayoutWidget_2)</span><br><span class="line">        self.verticalLayout_3.setContentsMargins(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        self.slider = QSlider(self.verticalLayoutWidget_2)</span><br><span class="line">        self.slider.setMinimum(<span class="number">0</span>)</span><br><span class="line">        self.slider.setOrientation(QtCore.Qt.Horizontal)</span><br><span class="line">        self.verticalLayout_3.addWidget(self.slider)</span><br><span class="line">        self.screen = QView(self.verticalLayoutWidget_2)</span><br><span class="line">        self.verticalLayout_3.addWidget(self.screen)</span><br><span class="line">        self.start.clicked.connect(self.startAction)</span><br><span class="line">        self.TN.clicked.connect(self.TNAction)</span><br><span class="line">        self.LN.clicked.connect(self.LNAction)</span><br><span class="line">        self.CN.clicked.connect(self.CNAction)</span><br><span class="line">        self.CT.clicked.connect(self.CTAction)</span><br><span class="line">        self.TC.clicked.connect(self.TCAction)</span><br><span class="line">        self.LC.clicked.connect(self.LCAction)</span><br><span class="line">        self.CL.clicked.connect(self.CLAction)</span><br><span class="line">        self.UC.clicked.connect(self.UCAction)</span><br><span class="line">        self.CU.clicked.connect(self.CUAction)</span><br><span class="line">        self.CmaxTime.clicked.connect(self.CmaxTimeAction)</span><br><span class="line">        self.CmaxEvent.clicked.connect(self.CmaxEventAction)</span><br><span class="line">        self.slider.valueChanged[int].connect(self.sliderAction)</span><br><span class="line">        self.TN.setEnabled(<span class="literal">False</span>)</span><br><span class="line">        self.LN.setEnabled(<span class="literal">False</span>)</span><br><span class="line">        self.CN.setEnabled(<span class="literal">False</span>)</span><br><span class="line">        self.CT.setEnabled(<span class="literal">False</span>)</span><br><span class="line">        self.TC.setEnabled(<span class="literal">False</span>)</span><br><span class="line">        self.LC.setEnabled(<span class="literal">False</span>)</span><br><span class="line">        self.CL.setEnabled(<span class="literal">False</span>)</span><br><span class="line">        self.UC.setEnabled(<span class="literal">False</span>)</span><br><span class="line">        self.CU.setEnabled(<span class="literal">False</span>)</span><br><span class="line">        self.CmaxTime.setEnabled(<span class="literal">False</span>)</span><br><span class="line">        self.CmaxEvent.setEnabled(<span class="literal">False</span>)</span><br><span class="line">        self.slider.setEnabled(<span class="literal">False</span>)</span><br><span class="line">        self.screen.setHtml(<span class="string">"please set configuration"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sliderAction</span><span class="params">(self,value)</span>:</span></span><br><span class="line">        self.slider.setValue(value)</span><br><span class="line">        <span class="keyword">if</span> self.displayTarget==<span class="string">"TN"</span>:</span><br><span class="line">            self.screen.load(QtCore.QUrl(self.outdir+<span class="string">"TN"</span>+str((value+<span class="number">1</span>)*<span class="number">10</span>)+<span class="string">".html"</span>))</span><br><span class="line">        <span class="keyword">elif</span> self.displayTarget==<span class="string">"LN"</span>:</span><br><span class="line">            self.screen.load(QtCore.QUrl(self.outdir+<span class="string">"LN"</span>+str(value)+<span class="string">".html"</span>))</span><br><span class="line">        <span class="keyword">elif</span> self.displayTarget==<span class="string">"CN"</span>:</span><br><span class="line">            self.screen.load(QtCore.QUrl(self.outdir+<span class="string">"CN"</span>+str(value)+<span class="string">".html"</span>))</span><br><span class="line">        <span class="keyword">elif</span> self.displayTarget==<span class="string">"CT"</span>:</span><br><span class="line">            self.screen.load(QtCore.QUrl(self.outdir+<span class="string">"CT"</span>+str(value)+<span class="string">".html"</span>))</span><br><span class="line">        <span class="keyword">elif</span> self.displayTarget==<span class="string">"TC"</span>:</span><br><span class="line">            self.screen.load(QtCore.QUrl(self.outdir+<span class="string">"TC"</span>+str(value)+<span class="string">".html"</span>))</span><br><span class="line">        <span class="keyword">elif</span> self.displayTarget==<span class="string">"LC"</span>:</span><br><span class="line">            self.screen.load(QtCore.QUrl(self.outdir+<span class="string">"LC"</span>+str(value)+<span class="string">".html"</span>))</span><br><span class="line">        <span class="keyword">elif</span> self.displayTarget==<span class="string">"CL"</span>:</span><br><span class="line">            self.screen.load(QtCore.QUrl(self.outdir+<span class="string">"CL"</span>+str(value)+<span class="string">".html"</span>))</span><br><span class="line">        <span class="keyword">elif</span> self.displayTarget==<span class="string">"UC"</span>:</span><br><span class="line">            self.screen.load(QtCore.QUrl(self.outdir+<span class="string">"UC"</span>+str(value)+<span class="string">".html"</span>))</span><br><span class="line">        <span class="keyword">elif</span> self.displayTarget==<span class="string">"CU"</span>:</span><br><span class="line">            self.screen.load(QtCore.QUrl(self.outdir+<span class="string">"CU"</span>+str(value)+<span class="string">".html"</span>))</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">renderBar</span><span class="params">(self,source,xname,yname,times,path)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(times):</span><br><span class="line">            index = pd.cut(source[i],bins=self.displayGrand).categories.values</span><br><span class="line">            index = [round(i.mid,<span class="number">4</span>) <span class="keyword">for</span> i <span class="keyword">in</span> index]</span><br><span class="line">            bar = Bar(width=<span class="number">450</span>,height=<span class="number">450</span>,is_animation=<span class="literal">False</span>)</span><br><span class="line">            bar.add(xname,index,pd.value_counts(source[i],bins=self.displayGrand,sort=<span class="literal">False</span>),xaxis_name=xname,yaxis_name=yname,is_legend_show=<span class="literal">False</span>,is_toolbox_show=<span class="literal">False</span>,is_label_show=<span class="literal">True</span>)</span><br><span class="line">            bar.render(<span class="string">"data/"</span>+path+str(i)+<span class="string">".html"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">renderScatter</span><span class="params">(self,xname,yname,ax,ay,times,path,op)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(times):</span><br><span class="line">            sc = Scatter(width=<span class="number">450</span>,height=<span class="number">450</span>,is_animation=<span class="literal">False</span>)</span><br><span class="line">            <span class="keyword">if</span> op==<span class="number">0</span>:</span><br><span class="line">                sc.add(xname,ax[i],ay[i],xaxis_name=xname,yaxis_name=yname,is_legend_show=<span class="literal">False</span>,is_toolbox_show=<span class="literal">False</span>)</span><br><span class="line">            <span class="keyword">elif</span> op==<span class="number">-1</span>:</span><br><span class="line">                sc.add(xname,ax[i],ay,xaxis_name=xname,yaxis_name=yname,is_legend_show=<span class="literal">False</span>,is_toolbox_show=<span class="literal">False</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                sc.add(xname,ax,ay[i],xaxis_name=xname,yaxis_name=yname,is_legend_show=<span class="literal">False</span>,is_toolbox_show=<span class="literal">False</span>)</span><br><span class="line">            sc.render(<span class="string">"data/"</span>+path+str(i)+<span class="string">".html"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">startAction</span><span class="params">(self)</span>:</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">#init</span></span><br><span class="line">        mode = <span class="number">0</span> <span class="comment">#0~5</span></span><br><span class="line">        self.capitalLog = []</span><br><span class="line">        self.luckyLog = []</span><br><span class="line">        self.unluckyLog = []</span><br><span class="line">        mapsize = int(self.map.currentText()[:<span class="number">3</span>])</span><br><span class="line">        num = int(self.N.currentText())</span><br><span class="line">        lucknum = int(self.luck.currentText())</span><br><span class="line">        unlucknum = int(self.unluck.currentText())</span><br><span class="line">        self.epochs = int(self.step.currentText())</span><br><span class="line">        self.displayGrand = int(self.grand.currentText())</span><br><span class="line">        std = float(self.T_std.currentText())</span><br><span class="line">        avg = float(self.T_avg.currentText())</span><br><span class="line">        self.talent = np.random.normal(avg, std, num)</span><br><span class="line">        <span class="keyword">if</span> mode==<span class="number">3</span>:</span><br><span class="line">            pay = np.random.normal(<span class="number">5</span>, <span class="number">1</span>, num)</span><br><span class="line">        self.capital = [<span class="number">10</span>]*num</span><br><span class="line">        self.sitex = np.random.uniform(<span class="number">0</span>,mapsize,num)</span><br><span class="line">        self.sitey = np.random.uniform(<span class="number">0</span>,mapsize,num)</span><br><span class="line">        self.lucky = [<span class="number">0</span>]*num</span><br><span class="line">        self.unlucky = [<span class="number">0</span>]*num</span><br><span class="line">        self.capitalLog.append(deepcopy(self.capital))</span><br><span class="line">        self.luckyLog.append(deepcopy(self.lucky))</span><br><span class="line">        self.unluckyLog.append(deepcopy(self.unlucky))</span><br><span class="line">        <span class="comment">#simulate</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(self.epochs):</span><br><span class="line">            goodx = np.random.uniform(<span class="number">0</span>,mapsize,lucknum)</span><br><span class="line">            goody = np.random.uniform(<span class="number">0</span>,mapsize,lucknum)</span><br><span class="line">            badx = np.random.uniform(<span class="number">0</span>,mapsize,unlucknum)</span><br><span class="line">            bady = np.random.uniform(<span class="number">0</span>,mapsize,unlucknum)</span><br><span class="line">            <span class="keyword">if</span> mode==<span class="number">4</span>:</span><br><span class="line">                avgcap = sum(self.capital)/num</span><br><span class="line">            <span class="keyword">if</span> mode==<span class="number">5</span>:</span><br><span class="line">                rankedcap = sorted(self.capital)</span><br><span class="line">                level1 = rankedcap[int(num*<span class="number">0.5</span>)]</span><br><span class="line">                level2 = rankedcap[int(num*<span class="number">0.9</span>)]</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(num):</span><br><span class="line">                <span class="keyword">if</span> mode==<span class="number">3</span>:</span><br><span class="line">                    self.capital[j] = self.capital[j]+pay[j]*self.talent[j]</span><br><span class="line">                <span class="keyword">for</span> k <span class="keyword">in</span> range(lucknum):</span><br><span class="line">                    disx = abs(goodx[k]-self.sitex[j])</span><br><span class="line">                    disy = abs(goody[k]-self.sitey[j])</span><br><span class="line">                    <span class="keyword">if</span> (disx&lt;<span class="number">2</span> <span class="keyword">and</span> disy&lt;<span class="number">2</span>) <span class="keyword">or</span> (mode==<span class="number">4</span> <span class="keyword">and</span> self.capital[j]&gt;avgcap <span class="keyword">and</span> disx&lt;<span class="number">3</span> <span class="keyword">and</span> disy&lt;<span class="number">3</span>):</span><br><span class="line">                        self.lucky[j]+=<span class="number">1</span></span><br><span class="line">                        r = random.random()</span><br><span class="line">                        <span class="keyword">if</span> mode==<span class="number">2</span>:</span><br><span class="line">                            self.capital[j]=(<span class="number">1</span>+self.talent[j])*self.capital[j]</span><br><span class="line">                        <span class="keyword">else</span>:</span><br><span class="line">                            <span class="keyword">if</span> r&lt;self.talent[j]:</span><br><span class="line">                                <span class="keyword">if</span> mode==<span class="number">5</span>:</span><br><span class="line">                                    <span class="keyword">if</span> self.capital[j]&lt;=level1:</span><br><span class="line">                                        self.capital[j]*=<span class="number">1.9</span></span><br><span class="line">                                    <span class="keyword">elif</span> self.capital[j]&lt;=level2:</span><br><span class="line">                                        self.capital[j]*=<span class="number">1.7</span></span><br><span class="line">                                    <span class="keyword">else</span>:</span><br><span class="line">                                        self.capital[j]*=<span class="number">1.5</span></span><br><span class="line">                                <span class="keyword">else</span>:</span><br><span class="line">                                    self.capital[j]*=<span class="number">2</span></span><br><span class="line">                <span class="keyword">for</span> k <span class="keyword">in</span> range(unlucknum):</span><br><span class="line">                    disx = abs(badx[k]-self.sitex[j])</span><br><span class="line">                    disy = abs(bady[k]-self.sitey[j])</span><br><span class="line">                    <span class="keyword">if</span> (disx&lt;<span class="number">2</span> <span class="keyword">and</span> disy&lt;<span class="number">2</span>) <span class="keyword">or</span> (mode==<span class="number">4</span> <span class="keyword">and</span> self.capital[j]&lt;avgcap <span class="keyword">and</span> disx&lt;<span class="number">3</span> <span class="keyword">and</span> disy&lt;<span class="number">3</span>):</span><br><span class="line">                        self.unlucky[j]+=<span class="number">1</span></span><br><span class="line">                        self.capital[j]/=<span class="number">2</span></span><br><span class="line">                        r = random.random()</span><br><span class="line">                        <span class="keyword">if</span> mode==<span class="number">1</span>:</span><br><span class="line">                            <span class="keyword">if</span> r&gt;self.talent[j]:</span><br><span class="line">                                self.capital[j]/=<span class="number">2</span></span><br><span class="line">                        <span class="keyword">elif</span> mode==<span class="number">2</span>:</span><br><span class="line">                            self.capital[j]=self.talent[j]*self.capital[j]</span><br><span class="line">                        <span class="keyword">else</span>:</span><br><span class="line">                            self.capital[j]/=<span class="number">2</span></span><br><span class="line">            self.capitalLog.append(deepcopy(self.capital))</span><br><span class="line">            self.luckyLog.append(deepcopy(self.lucky))</span><br><span class="line">            self.unluckyLog.append(deepcopy(self.unlucky))   </span><br><span class="line">        <span class="keyword">if</span> os.path.exists(<span class="string">"./data"</span>)==<span class="literal">False</span>:</span><br><span class="line">            os.mkdir(<span class="string">"data"</span>) </span><br><span class="line">        <span class="comment">#draw TN and Cmax</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>]:</span><br><span class="line">            index = pd.cut(self.talent,bins=i).categories.values</span><br><span class="line">            index = [round(i.mid,<span class="number">4</span>) <span class="keyword">for</span> i <span class="keyword">in</span> index]</span><br><span class="line">            bar = Bar(width=<span class="number">450</span>,height=<span class="number">450</span>,is_animation=<span class="literal">False</span>)</span><br><span class="line">            bar.add(<span class="string">"talent"</span>,index,pd.value_counts(self.talent,bins=i,sort=<span class="literal">False</span>),xaxis_name=<span class="string">"talent"</span>,yaxis_name=<span class="string">"individuals"</span>,is_legend_show=<span class="literal">False</span>,is_toolbox_show=<span class="literal">False</span>)</span><br><span class="line">            bar.render(<span class="string">"data/TN"</span>+str(i)+<span class="string">".html"</span>)</span><br><span class="line">        cmax = np.argmax(self.capital)</span><br><span class="line">        ctime = [k[cmax] <span class="keyword">for</span> k <span class="keyword">in</span> self.capitalLog]</span><br><span class="line">        cstep = list(range(self.epochs+<span class="number">1</span>))</span><br><span class="line">        line = Line(width=<span class="number">450</span>,height=<span class="number">450</span>,is_animation=<span class="literal">False</span>)</span><br><span class="line">        line.add(<span class="string">"captial"</span>,cstep,ctime,xaxis_name=<span class="string">"time"</span>,yaxis_name=<span class="string">"captial"</span>,is_legend_show=<span class="literal">False</span>,is_toolbox_show=<span class="literal">False</span>)</span><br><span class="line">        line.render(<span class="string">"data/CmaxTime.html"</span>)</span><br><span class="line">        cevent = [<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,self.epochs+<span class="number">1</span>):</span><br><span class="line">            cevent.append((self.luckyLog[i][cmax]-self.luckyLog[i<span class="number">-1</span>][cmax])-(self.unluckyLog[i][cmax]-self.unluckyLog[i<span class="number">-1</span>][cmax]))</span><br><span class="line">        line = Line(width=<span class="number">450</span>,height=<span class="number">450</span>,is_animation=<span class="literal">False</span>)</span><br><span class="line">        line.add(<span class="string">"event"</span>,cstep,cevent,xaxis_name=<span class="string">"time"</span>,yaxis_name=<span class="string">"event"</span>,is_legend_show=<span class="literal">False</span>,is_toolbox_show=<span class="literal">False</span>)</span><br><span class="line">        line.render(<span class="string">"data/CmaxEvent.html"</span>)</span><br><span class="line">        <span class="comment">#draw others</span></span><br><span class="line">        self.renderBar(self.luckyLog,<span class="string">"lucky"</span>,<span class="string">"individuals"</span>,self.epochs,<span class="string">"LN"</span>)</span><br><span class="line">        self.renderBar(self.capitalLog,<span class="string">"captial"</span>,<span class="string">"individuals"</span>,self.epochs,<span class="string">"CN"</span>)</span><br><span class="line">        self.renderScatter(<span class="string">"captial"</span>,<span class="string">"talent"</span>,self.capitalLog,self.talent,self.epochs,<span class="string">"CT"</span>,<span class="number">-1</span>)</span><br><span class="line">        self.renderScatter(<span class="string">"talent"</span>,<span class="string">"captial"</span>,self.talent,self.capitalLog,self.epochs,<span class="string">"TC"</span>,<span class="number">1</span>)</span><br><span class="line">        self.renderScatter(<span class="string">"lucky"</span>,<span class="string">"captial"</span>,self.luckyLog,self.capitalLog,self.epochs,<span class="string">"LC"</span>,<span class="number">0</span>)</span><br><span class="line">        self.renderScatter(<span class="string">"captial"</span>,<span class="string">"lucky"</span>,self.capitalLog,self.luckyLog,self.epochs,<span class="string">"CL"</span>,<span class="number">0</span>)</span><br><span class="line">        self.renderScatter(<span class="string">"unlucky"</span>,<span class="string">"captial"</span>,self.unluckyLog,self.capitalLog,self.epochs,<span class="string">"UC"</span>,<span class="number">0</span>)</span><br><span class="line">        self.renderScatter(<span class="string">"captial"</span>,<span class="string">"unlucky"</span>,self.capitalLog,self.unluckyLog,self.epochs,<span class="string">"CU"</span>,<span class="number">0</span>)</span><br><span class="line">        self.TN.setEnabled(<span class="literal">True</span>)</span><br><span class="line">        self.LN.setEnabled(<span class="literal">True</span>)</span><br><span class="line">        self.CN.setEnabled(<span class="literal">True</span>)</span><br><span class="line">        self.CT.setEnabled(<span class="literal">True</span>)</span><br><span class="line">        self.TC.setEnabled(<span class="literal">True</span>)</span><br><span class="line">        self.LC.setEnabled(<span class="literal">True</span>)</span><br><span class="line">        self.CL.setEnabled(<span class="literal">True</span>)</span><br><span class="line">        self.UC.setEnabled(<span class="literal">True</span>)</span><br><span class="line">        self.CU.setEnabled(<span class="literal">True</span>)</span><br><span class="line">        self.CmaxTime.setEnabled(<span class="literal">True</span>)</span><br><span class="line">        self.CmaxEvent.setEnabled(<span class="literal">True</span>)</span><br><span class="line">        self.screen.setHtml(<span class="string">"finished"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">displayInit</span><span class="params">(self,t,m,p)</span>:</span></span><br><span class="line">        self.displayTarget = t</span><br><span class="line">        self.slider.setEnabled(<span class="literal">True</span>)</span><br><span class="line">        self.slider.setValue(<span class="number">0</span>)</span><br><span class="line">        self.slider.setMaximum(m)</span><br><span class="line">        self.screen.load(QtCore.QUrl(self.outdir+p))</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">TNAction</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.displayInit(<span class="string">"TN"</span>,<span class="number">4</span>,<span class="string">"TN10.html"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">LNAction</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.displayInit(<span class="string">"LN"</span>,self.epochs,<span class="string">"LN0.html"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">CNAction</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.displayInit(<span class="string">"CN"</span>,self.epochs,<span class="string">"CN0.html"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">CTAction</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.displayInit(<span class="string">"CT"</span>,self.epochs,<span class="string">"CT0.html"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">TCAction</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.displayInit(<span class="string">"TC"</span>,self.epochs,<span class="string">"TC0.html"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">LCAction</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.displayInit(<span class="string">"LC"</span>,self.epochs,<span class="string">"LC0.html"</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">CLAction</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.displayInit(<span class="string">"CL"</span>,self.epochs,<span class="string">"CL0.html"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">UCAction</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.displayInit(<span class="string">"UC"</span>,self.epochs,<span class="string">"UC0.html"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">CUAction</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.displayInit(<span class="string">"CU"</span>,self.epochs,<span class="string">"CU0.html"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">CmaxTimeAction</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.slider.setEnabled(<span class="literal">False</span>)</span><br><span class="line">        self.slider.setValue(<span class="number">0</span>)</span><br><span class="line">        self.screen.load(QtCore.QUrl(self.outdir+<span class="string">"CmaxTime.html"</span>))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">CmaxEventAction</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.slider.setEnabled(<span class="literal">False</span>)</span><br><span class="line">        self.slider.setValue(<span class="number">0</span>)</span><br><span class="line">        self.screen.load(QtCore.QUrl(self.outdir+<span class="string">"CmaxEvent.html"</span>))</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">app = QApplication(sys.argv)</span><br><span class="line">qb = TVL()</span><br><span class="line">qb.show()</span><br><span class="line">sys.exit(app.exec_())</span><br></pre></td></tr></table></figure></div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:wkx1996@foxmail.com">w.k.x.</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://shivakasu.cn/2018/11/28/work0/">https://shivakasu.cn/2018/11/28/work0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://shivakasu.cn" target="_blank">SHIVAKASU</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Python/">Python</a></div><div class="post_share"><div class="social-share" data-image="http://file.shivakasu.cn/2f6de001e698ed5939de/arg.jpg" data-sites="facebook,twitter,wechat,weibo,qq,qzone,douban,google,linkedin"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><button class="reward-button"><i class="fas fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="https://file.shivakasu.cn/4a84dcfb31806db98b2a/wechat.png" alt="微信" onclick="window.open('https://file.shivakasu.cn/4a84dcfb31806db98b2a/wechat.png')"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="post-qr-code__img" src="https://file.shivakasu.cn/982f781ef31cbc46968b/alipay.jpg" alt="支付宝" onclick="window.open('https://file.shivakasu.cn/982f781ef31cbc46968b/alipay.jpg')"/><div class="post-qr-code__desc">支付宝</div></li></ul></div></button></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2018/12/28/work1/"><img class="prev-cover" data-src="https://file.shivakasu.cn/2f6de001e698ed5939de/arg.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">NSGA-III 算法实现与测试</div></div></a></div><div class="next-post pull-right"><a href="/2017/07/01/bugfix0/"><img class="next-cover" data-src="http://file.shivakasu.cn/625f259cab2ac7f8e1c0/bugfix.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">解决 anaconda3 安装 xgboost：/usr/lib/libstdc++.so.6：version 'GLIBCXX_3.4.14' not found问题</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2017/07/01/bugfix0/" title="解决 anaconda3 安装 xgboost：/usr/lib/libstdc++.so.6：version 'GLIBCXX_3.4.14' not found问题"><img class="relatedPosts_cover" data-src="http://file.shivakasu.cn/625f259cab2ac7f8e1c0/bugfix.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2017-07-01</div><div class="relatedPosts_title">解决 anaconda3 安装 xgboost：/usr/lib/libstdc++.so.6：version 'GLIBCXX_3.4.14' not found问题</div></div></a></div><div class="relatedPosts_item"><a href="/2016/10/07/bugfix2/" title="Ubuntu下安装scrapy遇到的问题及解决过程"><img class="relatedPosts_cover" data-src="http://file.shivakasu.cn/625f259cab2ac7f8e1c0/bugfix.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2016-10-07</div><div class="relatedPosts_title">Ubuntu下安装scrapy遇到的问题及解决过程</div></div></a></div><div class="relatedPosts_item"><a href="/2016/10/27/bugfix3/" title="Anaconda中关于Qt的bug"><img class="relatedPosts_cover" data-src="http://file.shivakasu.cn/625f259cab2ac7f8e1c0/bugfix.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2016-10-27</div><div class="relatedPosts_title">Anaconda中关于Qt的bug</div></div></a></div><div class="relatedPosts_item"><a href="/2019/02/04/fpy0/" title="流畅的Python Chapter 1：Python 数据模型"><img class="relatedPosts_cover" data-src="http://file.shivakasu.cn/ed83db4944a34b9070aa/fpy.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2019-02-04</div><div class="relatedPosts_title">流畅的Python Chapter 1：Python 数据模型</div></div></a></div><div class="relatedPosts_item"><a href="/2019/02/10/fpy3/" title="流畅的Python Chapter 5：一等函数"><img class="relatedPosts_cover" data-src="http://file.shivakasu.cn/ed83db4944a34b9070aa/fpy.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2019-02-10</div><div class="relatedPosts_title">流畅的Python Chapter 5：一等函数</div></div></a></div><div class="relatedPosts_item"><a href="/2019/02/06/fpy1/" title="流畅的Python Chapter 2：序列构成的数组"><img class="relatedPosts_cover" data-src="http://file.shivakasu.cn/ed83db4944a34b9070aa/fpy.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2019-02-06</div><div class="relatedPosts_title">流畅的Python Chapter 2：序列构成的数组</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var requestSetting = function (from,set) {
  var from = from
  var setting = set.split(',').filter(function(item){
  return from.indexOf(item) > -1
  });
  setting = setting.length == 0 ? from :setting;
  return setting
}

var guestInfo = requestSetting(['nick','mail','link'],'nick,mail,link')
var requiredFields = requestSetting(['nick','mail'],'nick,mail')

window.valine = new Valine({
  el:'#vcomment',
  appId: 'qIfwEiuSjlc5vyminB1rx2qX-gzGzoHsz',
  appKey: 'erfVXuW3AybzbWGqxSGxnBRp',
  placeholder: '来都来了，说点儿什么吧~',
  avatar: 'monsterid',
  meta: guestInfo,
  pageSize: '10',
  lang: 'zh-CN',
  recordIP: true,
  serverURLs: '',
  emojiCDN: '',
  emojiMaps: "",
  enableQQ: false,
  requiredFields: requiredFields
});</script></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By w.k.x.</div><div class="framework-info"><span>DrivenBy </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="icp"><a href="http://www.beian.miit.gov.cn/state/outPortal/loginPortal.action" target="_blank" rel="noopener"><img class="icp-icon" src="/img/icp.png"/><span>京ICP备19001969号-1</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><button id="readmode" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" title="缩小字体"><i class="fas fa-minus"></i></button><button class="translate_chn_to_cht" id="translateLink" title="简繁转换">繁</button><button id="darkmode" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" title="设置"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fas fa-comments"></i></a><button class="close" id="mobile-toc-button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js"></script><script>document.addEventListener('DOMContentLoaded', function() {
  pangu.autoSpacingPage()
})</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":false},"react":{"opacity":0.7},"log":false});</script></body></html>