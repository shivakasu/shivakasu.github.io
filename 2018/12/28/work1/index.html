<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>NSGA-III 算法实现与测试 | SHIVAKASU</title><meta name="description" content="1 绪论1.1 多目标优化问题 在实际问题中往往具有多个目标且需要同时满足，即在同一问题模型中同时存在几个非线性目标，而这些目标函数需要同时进行优化处理，并且这些目标又往往是互相冲突的，称这类问题称为多目标优化问题。设有 $m$ 个目标函数， $n$ 维决策变量，多目标优化问题可表示为：  \begin{split} min\;y&#x3D;&amp;F(x)&#x3D;(f_1(x),f_2(x),...,f_m(x))\"><meta name="keywords" content="Python"><meta name="author" content="w.k.x.,wkx1996@foxmail.com"><meta name="copyright" content="w.k.x."><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="https://file.shivakasu.cn/eb8581b76ec032ab0db8/favicon.ico"><link rel="canonical" href="https://shivakasu.cn/2018/12/28/work1/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="NSGA-III 算法实现与测试"><meta property="og:url" content="https://shivakasu.cn/2018/12/28/work1/"><meta property="og:site_name" content="SHIVAKASU"><meta property="og:description" content="1 绪论1.1 多目标优化问题 在实际问题中往往具有多个目标且需要同时满足，即在同一问题模型中同时存在几个非线性目标，而这些目标函数需要同时进行优化处理，并且这些目标又往往是互相冲突的，称这类问题称为多目标优化问题。设有 $m$ 个目标函数， $n$ 维决策变量，多目标优化问题可表示为：  \begin{split} min\;y&#x3D;&amp;F(x)&#x3D;(f_1(x),f_2(x),...,f_m(x))\"><meta property="og:image" content="https://file.shivakasu.cn/2f6de001e698ed5939de/arg.jpg"><meta property="article:published_time" content="2018-12-28T10:41:20.000Z"><meta property="article:modified_time" content="2018-12-28T15:34:20.000Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="prev" title="现代信息检索 Chapter 1：引言" href="https://shivakasu.cn/2019/01/18/mir0/"><link rel="next" title="Talent vs Luck 论文复现与分析" href="https://shivakasu.cn/2018/11/28/work0/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: {"languages":{"author":"作者: w.k.x.","link":"链接: ","source":"来源: SHIVAKASU","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: true    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true
  }</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="SHIVAKASU" type="application/atom+xml">
</head><body><canvas class="fireworks"></canvas><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://file.shivakasu.cn/cb7049104af4685e7289/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">46</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">19</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">6</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fa fa-book"></i><span> Book</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-绪论"><span class="toc-text">1 绪论</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-多目标优化问题"><span class="toc-text">1.1 多目标优化问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-多目标进化算法"><span class="toc-text">1.2 多目标进化算法</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-NSGA-III-算法实现"><span class="toc-text">2 NSGA-III 算法实现</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-NSGA-算法原理"><span class="toc-text">2.1 NSGA 算法原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-NSGA-II-算法原理"><span class="toc-text">2.2 NSGA-II 算法原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-NSGA-III-算法原理"><span class="toc-text">2.3 NSGA-III 算法原理</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-NSGA-III-算法测试"><span class="toc-text">3 NSGA-III 算法测试</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-测试问题"><span class="toc-text">3.1 测试问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-1-简单双目标问题"><span class="toc-text">3.1.1 简单双目标问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-2-DTLZ-系列问题"><span class="toc-text">3.1.2 DTLZ 系列问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-3-WFG-系列问题"><span class="toc-text">3.1.3 WFG 系列问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-测试结果"><span class="toc-text">3.2 测试结果</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-源码"><span class="toc-text">4 源码</span></a></li></ol></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://file.shivakasu.cn/2f6de001e698ed5939de/arg.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">SHIVAKASU</a></span><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fa fa-book"></i><span> Book</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">NSGA-III 算法实现与测试</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2018-12-28 18:41:20"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2018-12-28</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2018-12-28 23:34:20"><i class="fas fa-history fa-fw"></i> 更新于 2018-12-28</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/">编程实践</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta__icon"></i><span>字数总计:</span><span class="word-count">7.3k</span><span class="post-meta__separator">|</span><i class="far fa-clock fa-fw post-meta__icon"></i><span>阅读时长: 34 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="far fa-comments fa-fw post-meta__icon"></i><span>评论数:</span><a href="/2018/12/28/work1/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2018/12/28/work1/" itemprop="commentCount"></span></a></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="1-绪论"><a href="#1-绪论" class="headerlink" title="1 绪论"></a>1 绪论</h1><h2 id="1-1-多目标优化问题"><a href="#1-1-多目标优化问题" class="headerlink" title="1.1 多目标优化问题"></a>1.1 多目标优化问题</h2><ul>
<li><p>在实际问题中往往具有多个目标且需要同时满足，即在同一问题模型中同时存在几个非线性目标，而这些目标函数需要同时进行优化处理，并且这些目标又往往是互相冲突的，称这类问题称为多目标优化问题。设有 $m$ 个目标函数， $n$ 维决策变量，多目标优化问题可表示为：</p>
<script type="math/tex; mode=display">
\begin{split}
min\;y=&F(x)=(f_1(x),f_2(x),...,f_m(x))\\
subject\;to: &g_i(x)\le 0,i=1,2,...,p\\
&h_j(x)\le 0,i=1,2,...,q\\
&x\in D
\end{split}</script></li>
<li><p>其中 $x\in D$ 为 $n$ 维决策变量， $x=(x_1,x_2,…,x_n)$ ， $x_i$ 表示第 $i$ 个决策变量， $D$ 为 $n$ 维决策空间。 $y\in S$ 为 $m$ 维目标变量， $S$ 为 $m$ 维解空间。 $F(x)$ 定义了 $m$ 个由决策空间向解空间映射的目标分量函数，其中 $f_i(x)$ 是目标函数 $F(x)$ 的第 $i$ 个目标分量。 $g_i(x)\le 0(i=1,2,…,p)$ 定义了 $p$ 个不等式约束条件， $h_i(x)\le 0(i=1,2,…,p)$ 定义了 $q$ 个等式约束条件。 $min$ 或 $max$ 表示多目标问题的优化模式，一般情况下优化问题是转化成最小优化模式，即 $min$ 。</p>
</li>
<li><p>在对多个目标的处理方法上，主要存在以下两种方式，一种是通过加权的方式将多目标优化问题转化为单目标优化问题，一种是利用 $Pareto$ 支配关系求得一组互不支配的解。第一种方法需要预先制定目标的权重向量，并且求得最终结果受其影响很大，每当权重发生变化，算法都需要重新运行。而在实际应用当中，权重的值大多是无法预知的，并且用户的偏好也会随着环境的变化而发生变化。因此，目前普遍采用第二种方法求得一组互不支配的解集，然后在其基础上根据实际情况进行进一步的决策。</p>
</li>
<li>$Pareto$ 支配，又称 $Pareto$ 占优，设 $x_A,x_B\in X_f$ 是多目标优化问题中的两个可行解，则称与 $x_B$ 相比， $x_A$ 是 $Pareto$ 占优的，当且仅当：<script type="math/tex; mode=display">\forall i=1,2,...,m;f_i(x_A)\le f(x_B)</script>且至少存在一个 $j\in {1,2,…,m}$ ，使得 $f_i(x_A)&lt;f(x_B)$ 。记为 $x_A\prec x_B$ ， $x_A$ 支配 $x_B$ 。</li>
<li>可行解 $x_A\in X_f$ 称为 $Pareto$ 最优解(或非支配解)，当且仅当：<script type="math/tex; mode=display">\neg \exists x\in X_f,x\prec x_A</script>所有 $Pareto$ 最优解构成的集合称为 $Pareto$ 最优解集。由 $Pareto$ 最优解集中所有 $Pareto$ 最优解所对应的目标函数向量组成的曲面称为 $Pareto$ 前沿。</li>
<li>在求解多目标优化问题时，优化目标函数中若存在两个相互冲突的目标分量，那么在优化解空间中是不可能获取一个全局最优的点，而只能获取一组点的集合，即上面所定义的 $Pareto$ 最优解集，然后通过用户的偏好选取一个或一组 $Pareto$ 最优解，即满意解。</li>
</ul>
<h2 id="1-2-多目标进化算法"><a href="#1-2-多目标进化算法" class="headerlink" title="1.2 多目标进化算法"></a>1.2 多目标进化算法</h2><ul>
<li>多目标进化算法 $(MOEA)$ 是一类模拟生物进化机制而形成的全局性概率优化搜索方法，在20世纪90年代中期开始迅速发展，其发展可以分为两个阶段。第一阶段主要有两种方法即不基于 $Pareto$ 优化的方法和基于 $Pareto$ 优化的方法。第二个阶段就是在此基础上提出了外部集这个概念，外部集存放的是当前代的所有非支配个体，从而使解集保持较好的分布度。这个时期提出的多目标进化算法更多地强调算法的效率和有效性。在这两个阶段中，比较典型的多目标进化算法有 $NSGA2$ 、 $PESA2$ 和 $SPEA2$ 。对于这三种算法而言，其优点较多但是其缺点也比较明显的。如 $NSGA2$ 的优点在于运行效率高、解集有良好的分布性，特别对于低维优化问题具有较好的表现，其缺点在于在高维问题中解集过程具有缺陷，解集的多样性不理想。 $PESA2$ 的优点在于其解的收敛性很好，比较容易接近最优面，特别是在高维问题情况下，但其不足之处在于选择操作一次只能选取一个个体，时间消耗很大，而且阶级的多样性不佳。 $SPEA2$ 的优点在于可以取得一个分布度很好的解集，特别是在高维问题的求解上，但是其聚类过程保持多样性耗时较长，运行效率不高。</li>
<li>多目标进化算法的基本原理描述如下：多目标进化算法从一组随机生成的种群出发，通过对种群执行选择、交叉和变异等进化操作，经过多代进化，种群中个体的适应度不断提高，从而逐步逼近多目标优化问题的 $Pareto$ 最优解集。与单目标进化算法不同，多目标进化算法具有特殊的适应度评价机制。为了充分发挥进化算法的群体搜索优势，大多数 $(MOEA)$ 均采用基于 $Pareto$ 排序的适应度评价方法。在实际应用中，为使算法更好地收敛到多目标优化问题的 $Pareto$ 最优解，现有的 $(MOEA)$ 通常还采用了精英策略、小生境和设置外部集等关键技术。</li>
<li>$(MOEA)$ 一般框架所描述的算法思想如下： $(MOEA)$ 通过对种群 $X(t)$ 执行选择、交叉和变异等操作产生下一代种群 $X(t+1)$  。在每一代进化过程中，首先将种群 $X(t)$ 中的所有非劣解个体都复制到外部集 $A(t)$ 中，然后运用小生境截断算子剔除 $A(t)$ 中的劣解和一些距离较近的非劣解个体，以得到个体分布更为均匀的下一代外部集 $A(t+1)$ ，并且按照概率 $p_e$ 从 $A(t+1)$ 中选择一定数量的优秀个体进入下代种群。在进化结束时，将外部集中的非劣解个体作为最优解输出。目前， $(MOEA)$ 研究取得了大量成果，已被应用于许多领域，如工程领域、工业领域和科学领域。</li>
</ul>
<h1 id="2-NSGA-III-算法实现"><a href="#2-NSGA-III-算法实现" class="headerlink" title="2 NSGA-III 算法实现"></a>2 NSGA-III 算法实现</h1><ul>
<li>$NSGA$ (非支配排序遗传算法)系列算法包括 $NSGA$ 、 $NSGA-II$ 和 $NSGA-III$ ，每一代算法都是对上一代算法的优化，提升了运算效率。在此仅对这三个算法进行简单介绍，具体算法细节恕不赘述。</li>
</ul>
<h2 id="2-1-NSGA-算法原理"><a href="#2-1-NSGA-算法原理" class="headerlink" title="2.1 NSGA 算法原理"></a>2.1 NSGA 算法原理</h2><ul>
<li>$NSGA$ 与简单的遗传算法的主要区别在于：该算法在选择算子执行之前根据个体之间的支配关系进行了分层。其选择算子、交叉算子和变异算子与简单遗传算法没有区别。</li>
<li>算法流程如下，算法首先判断种群是否全部分级，如果已经全部分级，则在分级的基础上，使用基于拥挤策略的小生境技术对虚拟适应度值进行调整，并确定每个种群的虚拟适应度值，然后根据虚拟适应度值的大小，确定优先选择进行处理的种群。</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/c015e19a6a4fe8caaf5d/1.png" alt="NSGA 算法流程"></p>
<ul>
<li>$NSGA$ 采用非支配分层方法,可以使好的个体有更大的机会遗传到下一代，适应度共享策略则使得准 $Pareto$ 面上的个体均匀分布,保持了群体多样性,克服了超级个体的过度繁殖,防止了早熟收敛。但 $NSGA$ 算法仍存在以下缺陷：<ul>
<li>计算复杂度较高，为 $O(mN^3)$ ( $m$ 为目标函数个数， $N$ 为种群大小)，所以当种群较大时，计算相当耗时。</li>
<li>没有精英策略。精英策略可以加速算法的执行速度，而且也能在一定程度上确保己经找到的满意解不被丢失。</li>
<li>需要指定小生境半径，泛化能力较差。</li>
</ul>
</li>
</ul>
<h2 id="2-2-NSGA-II-算法原理"><a href="#2-2-NSGA-II-算法原理" class="headerlink" title="2.2 NSGA-II 算法原理"></a>2.2 NSGA-II 算法原理</h2><ul>
<li>$NSGA-II$ 是 $NSGA$ 的改进版本，在 $NSGA$ 的基础上，针对上述缺陷添加了一些策略，使算法效率显著提高。主要改进如下：<ul>
<li>提出了快速非支配排序法，降低了算法的计算复杂度。由原来的 $O(mN^3)$ 降到 $O(mN^2)$ ，其中， $m$ 为目标函数个数， $N$ 为种群大小。</li>
<li>引入精英策略，扩大采样空间。将父代种群与其产生的子代种群组合，共同竞争产生下一代种群，有利于保持父代中的优良个体进入下一代，并通过对种群中所有个体的分层存放，使得最佳个体不会丢失，迅速提高种群水平。</li>
<li>提出了拥挤度和拥挤度比较算子，代替了需要指定小生境半径的适应度共享策略，并在快速排序后的同级比较中作为胜出标准，使准 $Pareto$ 域中的个体能扩展到整个 $Pareto$ 域，并均匀分布，保持了种群的多样性。</li>
</ul>
</li>
<li>然而，基于拥挤距离的选择机制仅在双目标优化问题中表现较好，当面对三个及其以上目标的多目标优化问题时，如果继续采用拥挤距离的话，算法的收敛性和多样性将受到影响，即得到的解在非支配层上分布不均匀，导致算法陷入局部最优。</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/74176412cfbb0ce6b938/2.png" alt="NSGA-II 算法流程"></p>
<h2 id="2-3-NSGA-III-算法原理"><a href="#2-3-NSGA-III-算法原理" class="headerlink" title="2.3 NSGA-III 算法原理"></a>2.3 NSGA-III 算法原理</h2><ul>
<li>为了解决三个及其以上目标的多目标优化问题， $NSGA-III$ 应运而生。拥挤距离度量并不适合求解三个及更多目标的多目标优化问题，因此  $NSGA-III$ 不再采用拥挤距离，而是采用了新的选择机制，该机制会通过所提供的参考点，对种群中的个体进行更加系统地分析，以选择适应度更高的解进入下一代。</li>
<li>本文实现的是 $NSGA-III$ 算法，代码见文末。</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/522ac3cd3d1547d60127/3.png" alt="NSGA-III 算法流程"></p>
<h1 id="3-NSGA-III-算法测试"><a href="#3-NSGA-III-算法测试" class="headerlink" title="3 NSGA-III 算法测试"></a>3 NSGA-III 算法测试</h1><h2 id="3-1-测试问题"><a href="#3-1-测试问题" class="headerlink" title="3.1 测试问题"></a>3.1 测试问题</h2><ul>
<li>考虑到展示效果，仅对双目标和三目标问题进行测试。测试问题选择简单双目标问题、DTLZ系列问题和WFG系列问题。</li>
<li>发表在IEEE TEVC 2018，来自 Zapotecas-Martínez, C. A. C. Coello, H.E. Aguirre 和K.Tanaka的文章： $A\;Review\;of\;Features\;and\;Limitations\;of\;Existing\;Scalable\;Multi-Objective\;Test\;Suites$ ，对现有的多目标问题集做了一个综述。该文章不仅介绍了设计多目标演化问题集的方法，还介绍了多目标问题的特征要素，问题特征要素如图3.1所示。另外，文章中还做了一个较为详细的多目标演化问题集相关的综述，并指出不同问题集拥有的不同特征。该文章中详细总结了9个问题集：分别为DTLZ、WFG、LSS、SZDT、LSMOP、MNI、minus-DTLZ \&amp; minus-WFG、ZDT以及用于视觉测试的问题集。本文选取其中的DTLZ和WFG两个系列的测试问题集，计算公式均参考自该文章并直接截取原文中的表格。</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/10af791fab197e8bc8d2/r1.png" alt="问题特征要素"></p>
<h3 id="3-1-1-简单双目标问题"><a href="#3-1-1-简单双目标问题" class="headerlink" title="3.1.1 简单双目标问题"></a>3.1.1 简单双目标问题</h3><script type="math/tex; mode=display">
\begin{aligned}
&min\;f_1(x1,x2)=x_1^4-10x_1^2+x_1x_2+x_2^4-x_1^2x_2^2\\
&min\;f_2(x1,x2)=x_1^4+x_1x_2+x_2^4-x_1^2x_2^2\\
&s.t.\begin{cases}
-5\le x_1\le 5 \\
-5\le x_2\le 5
\end{cases}
\end{aligned}</script><h3 id="3-1-2-DTLZ-系列问题"><a href="#3-1-2-DTLZ-系列问题" class="headerlink" title="3.1.2 DTLZ 系列问题"></a>3.1.2 DTLZ 系列问题</h3><ul>
<li>Deb等人在2002年首次提出DTLZ测试函数集，并以共同研究者名字首字母命名(Deb，Thiele，Laumanns，Zitzler)，根据不同难度的设置期望，2005年Deb等又在原有七个函数的基础上加入了两个测试函数，共同组成了DTLZ测试函数集。DTLZ测试函数集可以扩展至任意数量的目标 $(m\ge 2)$ 并且可以有任意数目个变量 $(n\ge m)$ 。因为变量数与目标数易于控制，所以DTLZ函数集被广泛应用于多目标优化问题当中作为标准测试函数。本次实验仅测试前七个DTLZ测试函数。</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/0a107e448d03d8fddf30/r2.png" alt="DTLZ1 - DTLZ7计算公式"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/3bf08fd14a568dce6a90/r3.png" alt="DTLZ1 - DTLZ7问题特征"></p>
<h3 id="3-1-3-WFG-系列问题"><a href="#3-1-3-WFG-系列问题" class="headerlink" title="3.1.3 WFG 系列问题"></a>3.1.3 WFG 系列问题</h3><ul>
<li>WFG 测试函数集是Huband等人在2006年提出来的，一共包含9个测试问题，这些问题的目标数目都可以扩展到任意数量。和DTLZ测试函数集比起来，DTLZ问题的变量都是可分离的，因此复杂程度不高，而WFG测试问题的复杂程度更高、处理起来更具有挑战性。WFG测试问题的属性包括可分性或者不可分性、单峰或者多峰、PF形状为凸或者非凸、无偏差参数或有偏差参数。WFG测试函数集可以提供更有效的依据来评估优化算法在各种不同问题上的表现性能。</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/93dd2b324ed645073cf3/r4.png" alt="WFG1 - WFG9计算公式"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/4ad431e51644367a0c56/r5.png" alt="WFG1 - WFG9问题特征"></p>
<h2 id="3-2-测试结果"><a href="#3-2-测试结果" class="headerlink" title="3.2 测试结果"></a>3.2 测试结果</h2><ul>
<li>测试结果以散点图形式展示，其中双目标优化问题采用单个二维散点图，三目标优化问题采用两个不同角度的三维散点图。DTLZ和WFG系列问题的 $Pareto$ 前沿参考自Ye Tian、Ran Cheng、Xingyi Zhang和Yaochu Jin发表的文章： $PlatEMO:\;A\;MATLAB\;Platform\;for\;Evolutionary\;Multi-Objective\;Optimization$ ，下面第一张图为原文中截取的图片，作为直观评价测试结果的标准，本节其余图片为测试结果。由于程序运行耗时较长，因此测试中限定双目标优化问题的迭代次数为300代，三目标优化问题的迭代次数为500代，迭代次数均标记在每张图片上方。</li>
<li>测试结果反映了算法的拟合性能，同时也反映了不同问题收敛难度的区别。通过与真实 $Pareto$ 前沿的直观对比，可以看出如DTLZ2、DTLZ3等问题的拟合难度比较低，在500次迭代后拟合结果已经十分理想。相反，如DTLZ1、WFG4等问题的你和难度比较高，在500次迭代后拟合结果仍比较粗陋，表明算法的性能有待提高。</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/a2bc1b9ee9f944efeaf4/true.png" alt="部分多目标优化问题的 Pareto 前沿"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/05b64ee61a5e04ec3d92/t.png" alt="简单双目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/590f53585db42cb54ada/d12.png" alt="DTLZ1 双目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/e272fa43d6b1a844f300/d13.png" alt="DTLZ1 三目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/f94ea7b653146de43415/d22.png" alt="DTLZ2 双目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/72571588e2c2bc094e99/d23.png" alt="DTLZ2 三目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/3a17922ea31ebc436fef/d32.png" alt="DTLZ3 双目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/657d9e22c2cdd0fa4a87/d33.png" alt="DTLZ3 三目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/819f86aef8660277da26/d42.png" alt="DTLZ4 双目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/69383e5856dea435316e/d43.png" alt="DTLZ4 三目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/eabe3c4f4c57bcf9fd1a/d52.png" alt="DTLZ5 双目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/30da925dd7d017407d82/d53.png" alt="DTLZ5 三目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/8ae0e109ea073d873a87/d62.png" alt="DTLZ6 双目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/95f966bb8f46ac4df8a0/d63.png" alt="DTLZ6 三目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/afa24e8e2f8d43336bd9/d72.png" alt="DTLZ7 双目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/cc3cbd31a23952722cb1/d73.png" alt="DTLZ7 三目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/f7bcba79ac5e25fb2da2/w12.png" alt="WFG1 双目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/20d047742f696c7c31cd/w13.png" alt="WFG1 三目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/80758f0b6f45595f8db1/w22.png" alt="WFG2 双目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/579c87f09e6880e0b0f2/w23.png" alt="WFG2 三目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/f0e711957750921f3b5c/w32.png" alt="WFG3 双目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/45e45b3300bf827ef083/w33.png" alt="WFG3 三目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/99d296bb3576d266283a/w42.png" alt="WFG4 双目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/b3dd1d08fda007a407cb/w43.png" alt="WFG4 三目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/2a8df3847c2d564dbab3/w52.png" alt="WFG5 双目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/dd96a6024f22e50b9c4c/w53.png" alt="WFG5 三目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/0c4c10ecaab962f35114/w62.png" alt="WFG6 双目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/11fffc69fbc0a6fabcd6/w63.png" alt="WFG6 三目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/8473db8d9ec77735a490/w72.png" alt="WFG7 双目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/969aa9f73f979735b57f/w73.png" alt="WFG7 三目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/f28f646415853815f365/w82.png" alt="WFG8 双目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/d9cfb441781af5fccbd2/w83.png" alt="WFG8 三目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/4be973e10b920f1bedc1/w92.png" alt="WFG9 双目标问题测试结果"><br><img src= "/img/loading.gif" data-src="https://file.shivakasu.cn/0e9be4f0ef93a14521cd/w93.png" alt="WFG9 三目标问题测试结果"></p>
<h1 id="4-源码"><a href="#4-源码" class="headerlink" title="4 源码"></a>4 源码</h1><ul>
<li>编程环境：python3.6.4 + numpy1.14.3 + scipy1.1.0 + matplotlib2.2.2</li>
<li>使用说明：运行前修改代码最后一行 main 函数的参数。其中 Problem 是待测问题，可选择的有 ‘test’ 、 ‘DTLZ1’ ~ ‘DTLZ7’ 、 ‘WFG1’ ~ ‘WFG9’ 。 M 是目标个数，可设为2或3。  Generations 是算法迭代次数，可设为任意正整数。</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-  </span></span><br><span class="line"><span class="keyword">from</span> scipy.special <span class="keyword">import</span> comb</span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> combinations</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> copy <span class="keyword">import</span> deepcopy</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> mpl_toolkits.mplot3d <span class="keyword">import</span> Axes3D</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">T_weight</span><span class="params">(H,M)</span>:</span></span><br><span class="line">    N = int(comb(H+M<span class="number">-1</span>,M<span class="number">-1</span>))</span><br><span class="line">    tmp1 = np.array(list(combinations(np.arange(<span class="number">1</span>,H+M),M<span class="number">-1</span>)))</span><br><span class="line">    tmp2 = np.tile(np.arange(<span class="number">0</span>,M<span class="number">-1</span>),(int(comb(H+M<span class="number">-1</span>,M<span class="number">-1</span>)),<span class="number">1</span>))</span><br><span class="line">    Temp = tmp1-tmp2<span class="number">-1</span></span><br><span class="line">    W = np.zeros((N,M))</span><br><span class="line">    W[:,<span class="number">0</span>] = Temp[:,<span class="number">0</span>]<span class="number">-0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,M<span class="number">-1</span>):</span><br><span class="line">        W[:,i] = Temp[:,i]-Temp[:,i<span class="number">-1</span>]</span><br><span class="line">    W[:,<span class="number">-1</span>] = H-Temp[:,<span class="number">-1</span>]</span><br><span class="line">    W = W/H</span><br><span class="line">    <span class="keyword">return</span> N,W</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">F_weight</span><span class="params">(p1,p2,M)</span>:</span></span><br><span class="line">    N,W = T_weight(p1,M)</span><br><span class="line">    <span class="keyword">if</span> p2 &gt; <span class="number">0</span>:</span><br><span class="line">        N2,W2 = T_weight(p2,M)</span><br><span class="line">        N = N+N2</span><br><span class="line">        W = np.concatenate([W,W2/<span class="number">2</span>+<span class="number">1</span>/(<span class="number">2</span>*M)])</span><br><span class="line">    <span class="keyword">return</span> N,W</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">F_objective</span><span class="params">(Operation,p,M,Input)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> p==<span class="string">'test'</span>:</span><br><span class="line">        Output,Boundary = F_test(Operation,p,M,Input)</span><br><span class="line">    <span class="keyword">elif</span> p[:<span class="number">3</span>]==<span class="string">'WFG'</span>:</span><br><span class="line">        Output,Boundary = F_WFG(Operation,p,M,Input)</span><br><span class="line">    <span class="keyword">elif</span> p[:<span class="number">4</span>]==<span class="string">'DTLZ'</span>:</span><br><span class="line">        Output,Boundary = F_DTLZ(Operation,p,M,Input)</span><br><span class="line">    <span class="keyword">return</span> Output,Boundary</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">F_test</span><span class="params">(Operation,Problem,M,Input)</span>:</span></span><br><span class="line">    Boundary = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">if</span> Operation==<span class="string">'init'</span>:</span><br><span class="line">        D = <span class="number">10</span></span><br><span class="line">        MaxValue   = np.ones((<span class="number">1</span>,D))*<span class="number">5</span></span><br><span class="line">        MinValue   = np.ones((<span class="number">1</span>,D))*(<span class="number">-5</span>)</span><br><span class="line">        Population = np.random.rand(Input,D)</span><br><span class="line">        Population = Population*np.tile(MaxValue,(Input,<span class="number">1</span>))+(<span class="number">1</span>-Population)*np.tile(MinValue,(Input,<span class="number">1</span>))</span><br><span class="line">        Output   = Population</span><br><span class="line">        Boundary = np.array([MaxValue,MinValue])</span><br><span class="line">    <span class="keyword">elif</span> Operation==<span class="string">'value'</span>:</span><br><span class="line">        Population = Input</span><br><span class="line">        FunctionValue = np.zeros((Population.shape[<span class="number">0</span>],M))</span><br><span class="line">        x1 = Population[:,<span class="number">0</span>]</span><br><span class="line">        x2 = Population[:,<span class="number">1</span>]</span><br><span class="line">        FunctionValue[:,<span class="number">0</span>] = x1**<span class="number">4</span><span class="number">-10</span>*x1**<span class="number">2</span>+x1*x2+x2**<span class="number">4</span>-(x1**<span class="number">2</span>)*(x2**<span class="number">2</span>)</span><br><span class="line">        FunctionValue[:,<span class="number">1</span>] = x2**<span class="number">4</span>-(x1**<span class="number">2</span>)*(x2**<span class="number">2</span>)+x1**<span class="number">4</span>+x1*x2</span><br><span class="line">        Output = FunctionValue</span><br><span class="line">    <span class="keyword">return</span> Output,Boundary</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">F_DTLZ</span><span class="params">(Operation,Problem,M,Input)</span>:</span></span><br><span class="line">    Boundary = <span class="literal">None</span></span><br><span class="line">    K = [<span class="number">5</span>,<span class="number">10</span>,<span class="number">10</span>,<span class="number">10</span>,<span class="number">10</span>,<span class="number">10</span>,<span class="number">20</span>]</span><br><span class="line">    K = K[int(Problem[<span class="number">-1</span>])<span class="number">-1</span>]</span><br><span class="line">    <span class="keyword">if</span> Operation==<span class="string">'init'</span>:</span><br><span class="line">        D = M+K<span class="number">-1</span></span><br><span class="line">        MaxValue   = np.ones((<span class="number">1</span>,D))</span><br><span class="line">        MinValue   = np.zeros((<span class="number">1</span>,D))</span><br><span class="line">        Population = np.random.rand(Input,D)</span><br><span class="line">        Population = Population*np.tile(MaxValue,(Input,<span class="number">1</span>))+(<span class="number">1</span>-Population)*np.tile(MinValue,(Input,<span class="number">1</span>))</span><br><span class="line">        Output   = Population</span><br><span class="line">        Boundary = np.array([MaxValue,MinValue])</span><br><span class="line">    <span class="keyword">elif</span> Operation==<span class="string">'value'</span>:</span><br><span class="line">        Population = Input</span><br><span class="line">        FunctionValue = np.zeros((Population.shape[<span class="number">0</span>],M))</span><br><span class="line">        <span class="keyword">if</span> Problem == <span class="string">'DTLZ1'</span>:</span><br><span class="line">            g = <span class="number">100</span>*(K+np.sum((Population[:,M<span class="number">-1</span>:]<span class="number">-0.5</span>)**<span class="number">2</span>-np.cos(<span class="number">20</span>*np.pi*(Population[:,M<span class="number">-1</span>:]<span class="number">-0.5</span>)),axis=<span class="number">1</span>))</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(M):</span><br><span class="line">                FunctionValue[:,i] = <span class="number">0.5</span>*np.prod(Population[:,<span class="number">0</span>:M-i<span class="number">-1</span>],axis=<span class="number">1</span>)*(<span class="number">1</span>+g)</span><br><span class="line">                <span class="keyword">if</span> i &gt; <span class="number">0</span>:</span><br><span class="line">                    FunctionValue[:,i] = FunctionValue[:,i]*(<span class="number">1</span>-Population[:,M-i<span class="number">-1</span>])</span><br><span class="line">        <span class="keyword">elif</span> Problem == <span class="string">'DTLZ2'</span>:</span><br><span class="line">            g = np.sum((Population[:,M<span class="number">-1</span>:]<span class="number">-0.5</span>)**<span class="number">2</span>,axis=<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(M):</span><br><span class="line">                FunctionValue[:,i] = (<span class="number">1</span>+g)*np.prod(np.cos(<span class="number">0.5</span>*np.pi*Population[:,<span class="number">0</span>:M-i<span class="number">-1</span>]),axis=<span class="number">1</span>)</span><br><span class="line">                <span class="keyword">if</span> i &gt; <span class="number">0</span>:</span><br><span class="line">                    FunctionValue[:,i] = FunctionValue[:,i]*np.sin(<span class="number">0.5</span>*np.pi*Population[:,M-i<span class="number">-1</span>])</span><br><span class="line">        <span class="keyword">elif</span> Problem == <span class="string">'DTLZ3'</span>:</span><br><span class="line">            g = <span class="number">100</span>*(K+np.sum((Population[:,M<span class="number">-1</span>:]<span class="number">-0.5</span>)**<span class="number">2</span>-np.cos(<span class="number">20</span>*np.pi*(Population[:,M<span class="number">-1</span>:]<span class="number">-0.5</span>)),axis=<span class="number">1</span>))</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(M):</span><br><span class="line">                FunctionValue[:,i] = (<span class="number">1</span>+g)*np.prod(np.cos(<span class="number">0.5</span>*np.pi*Population[:,<span class="number">0</span>:M-i<span class="number">-1</span>]),axis=<span class="number">1</span>)</span><br><span class="line">                <span class="keyword">if</span> i &gt; <span class="number">0</span>:</span><br><span class="line">                    FunctionValue[:,i] = FunctionValue[:,i]*np.sin(<span class="number">0.5</span>*np.pi*Population[:,M-i<span class="number">-1</span>])</span><br><span class="line">        <span class="keyword">elif</span> Problem == <span class="string">'DTLZ4'</span>:</span><br><span class="line">            Population[:,<span class="number">0</span>:M<span class="number">-2</span>] = Population[:,<span class="number">0</span>:M<span class="number">-2</span>]**<span class="number">100</span></span><br><span class="line">            g = np.sum((Population[:,M<span class="number">-1</span>:]<span class="number">-0.5</span>)**<span class="number">2</span>,axis=<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(M):</span><br><span class="line">                FunctionValue[:,i] = (<span class="number">1</span>+g)*np.prod(np.cos(<span class="number">0.5</span>*np.pi*Population[:,<span class="number">0</span>:M-i<span class="number">-1</span>]),axis=<span class="number">1</span>)</span><br><span class="line">                <span class="keyword">if</span> i &gt; <span class="number">0</span>:</span><br><span class="line">                    FunctionValue[:,i] = FunctionValue[:,i]*np.sin(<span class="number">0.5</span>*np.pi*Population[:,M-i<span class="number">-1</span>])</span><br><span class="line">        <span class="keyword">elif</span> Problem == <span class="string">'DTLZ5'</span>:</span><br><span class="line">            g = np.sum((Population[:,M<span class="number">-1</span>:]<span class="number">-0.5</span>)**<span class="number">2</span>,axis=<span class="number">1</span>)</span><br><span class="line">            Temp = np.tile(g,(<span class="number">1</span>,M<span class="number">-2</span>))</span><br><span class="line">            <span class="keyword">if</span> M&gt;<span class="number">2</span>:</span><br><span class="line">                Temp = Temp.reshape(Temp.shape[<span class="number">1</span>],Temp.shape[<span class="number">0</span>])</span><br><span class="line">            Population[:,<span class="number">1</span>:M<span class="number">-1</span>] = (<span class="number">1</span>+<span class="number">2</span>*Temp*Population[:,<span class="number">1</span>:M<span class="number">-1</span>])/(<span class="number">2</span>+<span class="number">2</span>*Temp)</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(M):</span><br><span class="line">                FunctionValue[:,i] = (<span class="number">1</span>+g)*np.prod(np.cos(<span class="number">0.5</span>*np.pi*Population[:,<span class="number">0</span>:M-i<span class="number">-1</span>]),axis=<span class="number">1</span>)</span><br><span class="line">                <span class="keyword">if</span> i &gt; <span class="number">0</span>:</span><br><span class="line">                    FunctionValue[:,i] = FunctionValue[:,i]*np.sin(<span class="number">0.5</span>*np.pi*Population[:,M-i<span class="number">-1</span>])</span><br><span class="line">        <span class="keyword">elif</span> Problem == <span class="string">'DTLZ6'</span>:</span><br><span class="line">            g = np.sum(Population[:,M<span class="number">-1</span>:]**<span class="number">0.1</span>,axis=<span class="number">1</span>)</span><br><span class="line">            Temp = np.tile(g,(<span class="number">1</span>,M<span class="number">-2</span>))</span><br><span class="line">            <span class="keyword">if</span> M&gt;<span class="number">2</span>:</span><br><span class="line">                Temp = Temp.reshape(Temp.shape[<span class="number">1</span>],Temp.shape[<span class="number">0</span>])</span><br><span class="line">            Population[:,<span class="number">1</span>:M<span class="number">-1</span>] = (<span class="number">1</span>+<span class="number">2</span>*Temp*Population[:,<span class="number">1</span>:M<span class="number">-1</span>])/(<span class="number">2</span>+<span class="number">2</span>*Temp)</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(M):</span><br><span class="line">                FunctionValue[:,i] = (<span class="number">1</span>+g)*np.prod(np.cos(<span class="number">0.5</span>*np.pi*Population[:,<span class="number">0</span>:M-i<span class="number">-1</span>]),axis=<span class="number">1</span>)</span><br><span class="line">                <span class="keyword">if</span> i &gt; <span class="number">0</span>:</span><br><span class="line">                    FunctionValue[:,i] = FunctionValue[:,i]*np.sin(<span class="number">0.5</span>*np.pi*Population[:,M-i<span class="number">-1</span>])</span><br><span class="line">        <span class="keyword">elif</span> Problem == <span class="string">'DTLZ7'</span>:</span><br><span class="line">            g = <span class="number">1</span>+<span class="number">9</span>*np.mean(Population[:,M<span class="number">-1</span>:],axis=<span class="number">1</span>)</span><br><span class="line">            FunctionValue[:,<span class="number">0</span>:M<span class="number">-1</span>] = Population[:,<span class="number">0</span>:M<span class="number">-1</span>]</span><br><span class="line">            <span class="keyword">if</span> M&gt;<span class="number">2</span>:</span><br><span class="line">                Temp = np.tile(g,(<span class="number">1</span>,M<span class="number">-2</span>))</span><br><span class="line">                Temp = Temp.reshape(Temp.shape[<span class="number">1</span>],Temp.shape[<span class="number">0</span>])</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                Temp = np.tile(g,(<span class="number">1</span>,M<span class="number">-1</span>))</span><br><span class="line">            h = M-np.sum(FunctionValue[:,<span class="number">0</span>:M<span class="number">-1</span>]/(<span class="number">1</span>+Temp)*(<span class="number">1</span>+np.sin(<span class="number">3</span>*np.pi*FunctionValue[:,<span class="number">0</span>:M<span class="number">-1</span>])),axis=<span class="number">1</span>)</span><br><span class="line">            FunctionValue[:,M<span class="number">-1</span>] = (<span class="number">1</span>+g)*h</span><br><span class="line">        Output = FunctionValue</span><br><span class="line">    <span class="keyword">return</span> Output,Boundary</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">F_WFG</span><span class="params">(Operation,Problem,M,Input)</span>:</span></span><br><span class="line">    K = [<span class="number">4</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">10</span>,<span class="number">0</span>,<span class="number">7</span>,<span class="number">0</span>,<span class="number">9</span>]</span><br><span class="line">    K = K[M<span class="number">-2</span>]</span><br><span class="line">    L = <span class="number">10</span></span><br><span class="line">    Boundary = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">if</span> Operation == <span class="string">'init'</span>:</span><br><span class="line">        D = K+L</span><br><span class="line">        MaxValue   = np.arange(<span class="number">1</span>,D+<span class="number">1</span>)*<span class="number">2</span></span><br><span class="line">        MinValue   = np.zeros(D)</span><br><span class="line">        Population = np.random.rand(Input,D)</span><br><span class="line">        Population = Population*np.tile(MaxValue,(Input,<span class="number">1</span>))+(<span class="number">1</span>-Population)*np.tile(MinValue,(Input,<span class="number">1</span>))</span><br><span class="line">        Output   = Population</span><br><span class="line">        Boundary = np.array([MaxValue,MinValue])</span><br><span class="line">    <span class="keyword">elif</span> Operation == <span class="string">'value'</span>:</span><br><span class="line">        Population = Input</span><br><span class="line">        N = Population.shape[<span class="number">0</span>]</span><br><span class="line">        D = <span class="number">1</span></span><br><span class="line">        S = np.tile(np.arange(<span class="number">1</span>,M+<span class="number">1</span>)*<span class="number">2</span>,(N,<span class="number">1</span>))</span><br><span class="line">        <span class="keyword">if</span> Problem == <span class="string">'WFG3'</span>:</span><br><span class="line">            A = np.concatenate([np.ones((N,<span class="number">1</span>)),np.zeros((N,M<span class="number">-2</span>))],axis=<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            A = np.ones((N,M<span class="number">-1</span>))</span><br><span class="line">        z01 = Population/np.tile(np.arange(<span class="number">1</span>,Population.shape[<span class="number">1</span>]+<span class="number">1</span>)*<span class="number">2</span>,(N,<span class="number">1</span>))</span><br><span class="line">        <span class="keyword">if</span> Problem == <span class="string">'WFG1'</span>:</span><br><span class="line">            t1 = np.zeros((N,K+L))</span><br><span class="line">            t1[:,<span class="number">0</span>:K] = z01[:,<span class="number">0</span>:K]</span><br><span class="line">            t1[:,K:] = s_linear(z01[:,K:],<span class="number">0.35</span>)</span><br><span class="line">            t2 = np.zeros((N,K+L))</span><br><span class="line">            t2[:,<span class="number">0</span>:K] = t1[:,<span class="number">0</span>:K]</span><br><span class="line">            t2[:,K:] = b_flat(t1[:,K:],<span class="number">0.8</span>,<span class="number">0.75</span>,<span class="number">0.85</span>)</span><br><span class="line">            t3 = np.zeros((N,K+L))</span><br><span class="line">            t3 = t2**<span class="number">0.02</span></span><br><span class="line">            t4 = np.zeros((N,M))</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(M<span class="number">-1</span>):</span><br><span class="line">                t4[:,i] = r_sum(t3[:,i*K//(M<span class="number">-1</span>):(i+<span class="number">1</span>)*K//(M<span class="number">-1</span>)],np.arange(<span class="number">2</span>*(i*K//(M<span class="number">-1</span>)),<span class="number">2</span>*(i+<span class="number">1</span>)*K//(M<span class="number">-1</span>),<span class="number">2</span>))</span><br><span class="line">            t4[:,M<span class="number">-1</span>] = r_sum(t3[:,K:K+L],np.arange(<span class="number">2</span>*K,<span class="number">2</span>*(K+L),<span class="number">2</span>))</span><br><span class="line">            x = np.zeros((N,M))</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(M<span class="number">-1</span>):</span><br><span class="line">                x[:,i] = np.max([t4[:,M<span class="number">-1</span>],A[:,i]],axis=<span class="number">0</span>)*(t4[:,i]<span class="number">-0.5</span>)+<span class="number">0.5</span></span><br><span class="line">            x[:,M<span class="number">-1</span>] = t4[:,M<span class="number">-1</span>]</span><br><span class="line">            h = convex(x)</span><br><span class="line">            h[:,M<span class="number">-1</span>] = mixed(x)</span><br><span class="line">        <span class="keyword">elif</span> Problem == <span class="string">'WFG2'</span>:                    </span><br><span class="line">            t1 = np.zeros((N,K+L))</span><br><span class="line">            t1[:,<span class="number">0</span>:K] = z01[:,<span class="number">0</span>:K]</span><br><span class="line">            t1[:,K:] = s_linear(z01[:,K:],<span class="number">0.35</span>)</span><br><span class="line">            t2 = np.zeros((N,K+L//<span class="number">2</span>))</span><br><span class="line">            t2[:,<span class="number">0</span>:K] = t1[:,<span class="number">0</span>:K]</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(K,K+L//<span class="number">2</span>):</span><br><span class="line">                t2[:,i] = r_nonsep(t1[:,K+<span class="number">2</span>*(i-K)<span class="number">-2</span>:K+<span class="number">2</span>*(i-K)],<span class="number">2</span>)</span><br><span class="line">            t3 = np.zeros((N,M))</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(M<span class="number">-1</span>):</span><br><span class="line">                t3[:,i] = r_sum(t2[:,i*K//(M<span class="number">-1</span>):(i+<span class="number">1</span>)*K//(M<span class="number">-1</span>)],np.ones(K//(M<span class="number">-1</span>)))</span><br><span class="line">            t3[:,M<span class="number">-1</span>] = r_sum(t2[:,K:K+L//<span class="number">2</span>],np.ones(L//<span class="number">2</span>))</span><br><span class="line">            x = np.zeros((N,M))</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(M<span class="number">-1</span>):</span><br><span class="line">                x[:,i] = np.max([t3[:,M<span class="number">-1</span>],A[:,i]],axis=<span class="number">0</span>)*(t3[:,i]<span class="number">-0.5</span>)+<span class="number">0.5</span></span><br><span class="line">            x[:,M<span class="number">-1</span>] = t3[:,M<span class="number">-1</span>]</span><br><span class="line">            h = convex(x)</span><br><span class="line">            h[:,M<span class="number">-1</span>] = disc(x)</span><br><span class="line">        <span class="keyword">elif</span> Problem == <span class="string">'WFG3'</span>:</span><br><span class="line">            t1 = np.zeros((N,K+L))</span><br><span class="line">            t1[:,<span class="number">0</span>:K] = z01[:,<span class="number">0</span>:K]</span><br><span class="line">            t1[:,K:] = s_linear(z01[:,K:],<span class="number">0.35</span>)</span><br><span class="line">            t2 = np.zeros((N,K+L//<span class="number">2</span>))</span><br><span class="line">            t2[:,<span class="number">0</span>:K] = t1[:,<span class="number">0</span>:K]</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(K,K+L//<span class="number">2</span>):</span><br><span class="line">                t2[:,i] = r_nonsep(t1[:,K+<span class="number">2</span>*(i-K)<span class="number">-2</span>:K+<span class="number">2</span>*(i-K)],<span class="number">2</span>)</span><br><span class="line">            t3 = np.zeros((N,M))</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(M<span class="number">-1</span>):</span><br><span class="line">                t3[:,i] = r_sum(t2[:,i*K//(M<span class="number">-1</span>):(i+<span class="number">1</span>)*K//(M<span class="number">-1</span>)],np.ones(K//(M<span class="number">-1</span>)))</span><br><span class="line">            t3[:,M<span class="number">-1</span>] = r_sum(t2[:,K:K+L//<span class="number">2</span>],np.ones(L//<span class="number">2</span>))</span><br><span class="line">            x = np.zeros((N,M))</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(M<span class="number">-1</span>):</span><br><span class="line">                x[:,i] = np.max([t3[:,M<span class="number">-1</span>],A[:,i]],axis=<span class="number">0</span>)*(t3[:,i]<span class="number">-0.5</span>)+<span class="number">0.5</span></span><br><span class="line">            x[:,M<span class="number">-1</span>] = t3[:,M<span class="number">-1</span>]</span><br><span class="line">            h = linear(x)</span><br><span class="line">        <span class="keyword">elif</span> Problem == <span class="string">'WFG4'</span>:</span><br><span class="line">            t1 = np.zeros((N,K+L))</span><br><span class="line">            t1 = s_multi(z01,<span class="number">30</span>,<span class="number">10</span>,<span class="number">0.35</span>)</span><br><span class="line">            t2 = np.zeros((N,M))</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(M<span class="number">-1</span>):</span><br><span class="line">                t2[:,i] = r_sum(t1[:,i*K//(M<span class="number">-1</span>):(i+<span class="number">1</span>)*K//(M<span class="number">-1</span>)],np.ones(K//(M<span class="number">-1</span>)))</span><br><span class="line">            t2[:,M<span class="number">-1</span>] = r_sum(t1[:,K:K+L],np.ones(L))</span><br><span class="line">            x = np.zeros((N,M))</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(M<span class="number">-1</span>):</span><br><span class="line">                x[:,i] = np.max([t2[:,M<span class="number">-1</span>],A[:,i]],axis=<span class="number">0</span>)*(t2[:,i]<span class="number">-0.5</span>)+<span class="number">0.5</span></span><br><span class="line">            x[:,M<span class="number">-1</span>] = t2[:,M<span class="number">-1</span>]</span><br><span class="line">            h = concave(x)</span><br><span class="line">            h[:,M<span class="number">-1</span>] = disc(x)</span><br><span class="line">        <span class="keyword">elif</span> Problem == <span class="string">'WFG5'</span>:</span><br><span class="line">            t1 = np.zeros((N,K+L))</span><br><span class="line">            t1 = s_decept(z01,<span class="number">0.35</span>,<span class="number">0.001</span>,<span class="number">0.05</span>)</span><br><span class="line">            t2 = np.zeros((N,M))</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(M<span class="number">-1</span>):</span><br><span class="line">                t2[:,i] = r_sum(t1[:,i*K//(M<span class="number">-1</span>):(i+<span class="number">1</span>)*K//(M<span class="number">-1</span>)],np.ones(K//(M<span class="number">-1</span>)))</span><br><span class="line">            t2[:,M<span class="number">-1</span>] = r_sum(t1[:,K:K+L],np.ones(L))</span><br><span class="line">            x = np.zeros((N,M))</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(M<span class="number">-1</span>):</span><br><span class="line">                x[:,i] = np.max([t2[:,M<span class="number">-1</span>],A[:,i]],axis=<span class="number">0</span>)*(t2[:,i]<span class="number">-0.5</span>)+<span class="number">0.5</span></span><br><span class="line">            x[:,M<span class="number">-1</span>] = t2[:,M<span class="number">-1</span>]</span><br><span class="line">            h = concave(x)</span><br><span class="line">            h[:,M<span class="number">-1</span>] = disc(x)</span><br><span class="line">        <span class="keyword">elif</span> Problem == <span class="string">'WFG6'</span>:</span><br><span class="line">            t1 = np.zeros((N,K+L))</span><br><span class="line">            t1[:,<span class="number">0</span>:K] = z01[:,<span class="number">0</span>:K]</span><br><span class="line">            t1[:,K:] = s_linear(z01[:,K:],<span class="number">0.35</span>)</span><br><span class="line">            t2 = np.zeros((N,M))</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(M<span class="number">-1</span>):</span><br><span class="line">                t2[:,i] = r_nonsep(t1[:,i*K//(M<span class="number">-1</span>):(i+<span class="number">1</span>)*K//(M<span class="number">-1</span>)],<span class="number">2</span>)</span><br><span class="line">            t2[:,M<span class="number">-1</span>] = r_nonsep(t1[:,K<span class="number">-1</span>:],L)</span><br><span class="line">            x = np.zeros((N,M))</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(M<span class="number">-1</span>):</span><br><span class="line">                x[:,i] = np.max([t2[:,M<span class="number">-1</span>],A[:,i]],axis=<span class="number">0</span>)*(t2[:,i]<span class="number">-0.5</span>)+<span class="number">0.5</span></span><br><span class="line">            x[:,M<span class="number">-1</span>] = t2[:,M<span class="number">-1</span>]</span><br><span class="line">            h = concave(x)   </span><br><span class="line">            h[:,M<span class="number">-1</span>] = disc(x)    </span><br><span class="line">        <span class="keyword">elif</span> Problem == <span class="string">'WFG7'</span>:</span><br><span class="line">            t1 = np.zeros((N,K+L))</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(K):</span><br><span class="line">                t1[:,i] = b_param(z01[:,i],r_sum(z01[:,i:],np.ones(K+L-i)),<span class="number">0.98</span>/<span class="number">49.98</span>,<span class="number">0.02</span>,<span class="number">50</span>)</span><br><span class="line">            t1[:,K:] = z01[:,K:]</span><br><span class="line">            t2 = np.zeros((N,K+L))</span><br><span class="line">            t2[:,<span class="number">0</span>:K] = t1[:,<span class="number">0</span>:K]</span><br><span class="line">            t2[:,K:] = s_linear(t1[:,K:],<span class="number">0.35</span>)</span><br><span class="line">            t3 = np.zeros((N,M))</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(M<span class="number">-1</span>):</span><br><span class="line">                t3[:,i] = r_sum(t2[:,i*K//(M<span class="number">-1</span>):(i+<span class="number">1</span>)*K//(M<span class="number">-1</span>)],np.ones(K//(M<span class="number">-1</span>)))</span><br><span class="line">            t3[:,M<span class="number">-1</span>] = r_sum(t2[:,K:K+L],np.ones(L))</span><br><span class="line">            x = np.zeros((N,M))</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(M<span class="number">-1</span>):</span><br><span class="line">                x[:,i] = np.max([t3[:,M<span class="number">-1</span>],A[:,i]],axis=<span class="number">0</span>)*(t3[:,i]<span class="number">-0.5</span>)+<span class="number">0.5</span></span><br><span class="line">            x[:,M<span class="number">-1</span>] = t3[:,M<span class="number">-1</span>]</span><br><span class="line">            h = concave(x)</span><br><span class="line">            h[:,M<span class="number">-1</span>] = disc(x)</span><br><span class="line">        <span class="keyword">elif</span> Problem == <span class="string">'WFG8'</span>:</span><br><span class="line">            t1 = np.zeros((N,K+L))</span><br><span class="line">            t1[:,<span class="number">0</span>:K] = z01[:,<span class="number">0</span>:K]</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(K,K+L):</span><br><span class="line">                t1[:,i] = b_param(z01[:,i],r_sum(z01[:,<span class="number">0</span>:i<span class="number">-1</span>],np.ones(i<span class="number">-1</span>)),<span class="number">0.98</span>/<span class="number">49.98</span>,<span class="number">0.02</span>,<span class="number">50</span>)</span><br><span class="line">            t2 = np.zeros((N,K+L))</span><br><span class="line">            t2[:,<span class="number">0</span>:K] = t1[:,<span class="number">0</span>:K]</span><br><span class="line">            t2[:,K:] = s_linear(t1[:,K:],<span class="number">0.35</span>)</span><br><span class="line">            t3 = np.zeros((N,M))</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(M<span class="number">-1</span>):</span><br><span class="line">                t3[:,i] = r_sum(t2[:,i*K//(M<span class="number">-1</span>):(i+<span class="number">1</span>)*K//(M<span class="number">-1</span>)],np.ones(K//(M<span class="number">-1</span>)))</span><br><span class="line">            t3[:,M<span class="number">-1</span>] = r_sum(t2[:,K:K+L],np.ones(L))</span><br><span class="line">            x = np.zeros((N,M))</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(M<span class="number">-1</span>):</span><br><span class="line">                x[:,i] = np.max([t3[:,M<span class="number">-1</span>],A[:,i]],axis=<span class="number">0</span>)*(t3[:,i]<span class="number">-0.5</span>)+<span class="number">0.5</span></span><br><span class="line">            x[:,M<span class="number">-1</span>] = t3[:,M<span class="number">-1</span>]</span><br><span class="line">            h = concave(x)</span><br><span class="line">            h[:,M<span class="number">-1</span>] = disc(x)</span><br><span class="line">        <span class="keyword">elif</span> Problem == <span class="string">'WFG9'</span>:</span><br><span class="line">            t1 = np.zeros((N,K+L))</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(K+L<span class="number">-1</span>):</span><br><span class="line">                t1[:,i] = b_param(z01[:,i],r_sum(z01[:,i:],np.ones(K+L-i)),<span class="number">0.98</span>/<span class="number">49.98</span>,<span class="number">0.02</span>,<span class="number">50</span>)</span><br><span class="line">            t1[:,<span class="number">-1</span>] = z01[:,<span class="number">-1</span>]</span><br><span class="line">            t2 = np.zeros((N,K+L))</span><br><span class="line">            t2[:,<span class="number">0</span>:K] = s_decept(t1[:,<span class="number">0</span>:K],<span class="number">0.35</span>,<span class="number">0.001</span>,<span class="number">0.05</span>)</span><br><span class="line">            t2[:,K:] = s_multi(t1[:,K:],<span class="number">30</span>,<span class="number">95</span>,<span class="number">0.35</span>)</span><br><span class="line">            t3 = np.zeros((N,M))</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(M<span class="number">-1</span>):</span><br><span class="line">                t3[:,i] = r_nonsep(t2[:,i*K//(M<span class="number">-1</span>):(i+<span class="number">1</span>)*K//(M<span class="number">-1</span>)],K//(M<span class="number">-1</span>))</span><br><span class="line">            t3[:,M<span class="number">-1</span>] = r_nonsep(t2[:,K:],L)</span><br><span class="line">            x = np.zeros((N,M))</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(M<span class="number">-1</span>):</span><br><span class="line">                x[:,i] = np.max([t3[:,M<span class="number">-1</span>],A[:,i]],axis=<span class="number">0</span>)*(t3[:,i]<span class="number">-0.5</span>)+<span class="number">0.5</span></span><br><span class="line">            x[:,M<span class="number">-1</span>] = t3[:,M<span class="number">-1</span>]</span><br><span class="line">            h = concave(x)</span><br><span class="line">            h[:,M<span class="number">-1</span>] = disc(x)</span><br><span class="line">        Output = np.tile(D*x[:,M<span class="number">-1</span>].reshape((N,<span class="number">1</span>)),(<span class="number">1</span>,M))+S*h</span><br><span class="line">    <span class="keyword">return</span> Output,Boundary</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">b_flat</span><span class="params">(y,A,B,C)</span>:</span></span><br><span class="line">    Output = A+np.minimum(<span class="number">0</span>,np.floor(y-B))*A*(B-y)/B-np.minimum(<span class="number">0</span>,np.floor(C-y))*(<span class="number">1</span>-A)*(y-C)/(<span class="number">1</span>-C)</span><br><span class="line">    Output = np.round(Output,<span class="number">-6</span>)</span><br><span class="line">    <span class="keyword">return</span> Output</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">b_param</span><span class="params">(y,Y,A,B,C)</span>:</span></span><br><span class="line">    Output = y**(B+(C-B)*(A-(<span class="number">1</span><span class="number">-2</span>*Y)*np.abs(np.floor(<span class="number">0.5</span>-Y)+A)))</span><br><span class="line">    <span class="keyword">return</span> Output</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">s_linear</span><span class="params">(y,A)</span>:</span></span><br><span class="line">    Output = np.abs(y-A)/np.abs(np.floor(A-y)+A)</span><br><span class="line">    <span class="keyword">return</span> Output</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">s_decept</span><span class="params">(y,A,B,C)</span>:</span></span><br><span class="line">    Output = <span class="number">1</span>+(np.abs(y-A)-B)*(np.floor(y-A+B)*(<span class="number">1</span>-C+(A-B)/B)/(A-B)+np.floor(A+B-y)*(<span class="number">1</span>-C+(<span class="number">1</span>-A-B)/B)/(<span class="number">1</span>-A-B)+<span class="number">1</span>/B)</span><br><span class="line">    <span class="keyword">return</span> Output</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">s_multi</span><span class="params">(y,A,B,C)</span>:</span></span><br><span class="line">    Output = (<span class="number">1</span>+np.cos((<span class="number">4</span>*A+<span class="number">2</span>)*np.pi*(<span class="number">0.5</span>-np.abs(y-C)/<span class="number">2.</span>/(np.floor(C-y)+C)))+<span class="number">4</span>*B*(np.abs(y-C)/<span class="number">2.</span>/(np.floor(C-y)+C))**<span class="number">2</span>)/(B+<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> Output</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">r_sum</span><span class="params">(y,w)</span>:</span></span><br><span class="line">    Output = np.sum(y*np.tile(w,(y.shape[<span class="number">0</span>],<span class="number">1</span>)),axis=<span class="number">1</span>)/np.sum(w)</span><br><span class="line">    <span class="keyword">return</span> Output</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">r_nonsep</span><span class="params">(y,A)</span>:</span></span><br><span class="line">    Output = np.zeros(y.shape[<span class="number">0</span>])</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(y.shape[<span class="number">1</span>]):</span><br><span class="line">        Temp = np.zeros(y.shape[<span class="number">0</span>])</span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> range(A<span class="number">-1</span>):</span><br><span class="line">            Temp = Temp+np.abs(y[:,j]-y[:,(j+k)%y.shape[<span class="number">1</span>]])</span><br><span class="line">        Output = Output+y[:,j]+Temp</span><br><span class="line">    Output = Output/(y.shape[<span class="number">1</span>]/A)/np.ceil(A/<span class="number">2</span>)/(<span class="number">1</span>+<span class="number">2</span>*A<span class="number">-2</span>*np.ceil(A/<span class="number">2</span>))</span><br><span class="line">    <span class="keyword">return</span> Output</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">linear</span><span class="params">(x)</span>:</span></span><br><span class="line">    Output = np.zeros(x.shape)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(x.shape[<span class="number">1</span>]):</span><br><span class="line">        Output[:,i] = np.prod(x[:,<span class="number">0</span>:x.shape[<span class="number">1</span>]-i<span class="number">-1</span>],axis=<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span> i &gt; <span class="number">0</span>:</span><br><span class="line">            Output[:,i] = Output[:,i]*(<span class="number">1</span>-x[:,x.shape[<span class="number">1</span>]-i<span class="number">-1</span>])</span><br><span class="line">    <span class="keyword">return</span> Output</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">convex</span><span class="params">(x)</span>:</span></span><br><span class="line">    Output = np.zeros(x.shape)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(x.shape[<span class="number">1</span>]):</span><br><span class="line">        Output[:,i] = np.prod(<span class="number">1</span>-np.cos(x[:,<span class="number">0</span>:<span class="number">-1</span>-i]*np.pi/<span class="number">2</span>),axis=<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span> i &gt; <span class="number">0</span>:</span><br><span class="line">            Output[:,i] = Output[:,i]*(<span class="number">1</span>-np.sin(x[:,x.shape[<span class="number">1</span>]-i]*np.pi/<span class="number">2</span>))</span><br><span class="line">    <span class="keyword">return</span> Output</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">concave</span><span class="params">(x)</span>:</span></span><br><span class="line">    Output = np.zeros(x.shape)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(x.shape[<span class="number">1</span>]):</span><br><span class="line">        Output[:,i] = np.prod(np.sin(x[:,<span class="number">0</span>:<span class="number">-1</span>-i]*np.pi/<span class="number">2</span>),axis=<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span> i &gt; <span class="number">0</span>:</span><br><span class="line">            Output[:,i] = Output[:,i]*(np.cos(x[:,x.shape[<span class="number">1</span>]-i]*np.pi/<span class="number">2</span>))</span><br><span class="line">    <span class="keyword">return</span> Output</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mixed</span><span class="params">(x)</span>:</span></span><br><span class="line">    Output = <span class="number">1</span>-x[:,<span class="number">0</span>]-np.cos(<span class="number">10</span>*np.pi*x[:,<span class="number">0</span>]+np.pi/<span class="number">2</span>)/<span class="number">10</span>/np.pi</span><br><span class="line">    <span class="keyword">return</span> Output</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">disc</span><span class="params">(x)</span>:</span></span><br><span class="line">    Output = <span class="number">1</span>-x[:,<span class="number">0</span>]*(np.cos(<span class="number">5</span>*np.pi*x[:,<span class="number">0</span>]))**<span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span> Output</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">F_mating</span><span class="params">(Population)</span>:</span></span><br><span class="line">    N,D = Population.shape</span><br><span class="line">    MatingPool = np.zeros((N,D))</span><br><span class="line">    Rank = list(range(N))</span><br><span class="line">    np.random.shuffle(Rank)</span><br><span class="line">    Pointer = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,N,<span class="number">2</span>):</span><br><span class="line">        k = np.zeros((<span class="number">1</span>,<span class="number">2</span>))</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">2</span>):</span><br><span class="line">            <span class="keyword">if</span> Pointer &gt;= N:</span><br><span class="line">                np.random.shuffle(Rank)</span><br><span class="line">                Pointer = <span class="number">1</span></span><br><span class="line">            k = Rank[Pointer<span class="number">-1</span>:Pointer+<span class="number">1</span>]</span><br><span class="line">            Pointer = Pointer+<span class="number">2</span></span><br><span class="line">        MatingPool[i,:] = Population[k[<span class="number">0</span>],:]</span><br><span class="line">        <span class="keyword">if</span> i+<span class="number">1</span>&lt;N:</span><br><span class="line">            MatingPool[i+<span class="number">1</span>,:] = Population[k[<span class="number">1</span>],:]</span><br><span class="line">    <span class="keyword">return</span> MatingPool</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">F_generator</span><span class="params">(MatingPool,Boundary,MaxOffspring)</span>:</span></span><br><span class="line">    N,D = MatingPool.shape</span><br><span class="line">    ProC = <span class="number">1</span>    </span><br><span class="line">    ProM = <span class="number">1</span>/D  </span><br><span class="line">    DisC = <span class="number">20</span>   </span><br><span class="line">    DisM = <span class="number">20</span>   </span><br><span class="line">    Offspring = np.zeros((N,D))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,N,<span class="number">2</span>):</span><br><span class="line">        beta = np.zeros((<span class="number">1</span>,D))</span><br><span class="line">        miu  = np.random.rand(<span class="number">1</span>,D)</span><br><span class="line">        beta[miu&lt;=<span class="number">0.5</span>] = (<span class="number">2</span>*miu[miu&lt;=<span class="number">0.5</span>])**(<span class="number">1</span>/(DisC+<span class="number">1</span>))</span><br><span class="line">        beta[miu&gt;<span class="number">0.5</span>]  = (<span class="number">2</span><span class="number">-2</span>*miu[miu&gt;<span class="number">0.5</span>])**(<span class="number">-1</span>/(DisC+<span class="number">1</span>))</span><br><span class="line">        beta = beta*(<span class="number">-1</span>)**np.random.randint(<span class="number">2</span>,size=(<span class="number">1</span>,D))</span><br><span class="line">        beta[np.random.rand(<span class="number">1</span>,D)&gt;ProC] = <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> i+<span class="number">1</span>&lt;N:</span><br><span class="line">            Offspring[i,:]   = (MatingPool[i,:]+MatingPool[i+<span class="number">1</span>,:])/<span class="number">2</span>+beta*(MatingPool[i,:]-MatingPool[i+<span class="number">1</span>,:])/<span class="number">2</span></span><br><span class="line">            Offspring[i+<span class="number">1</span>,:] = (MatingPool[i,:]+MatingPool[i+<span class="number">1</span>,:])/<span class="number">2</span>-beta*(MatingPool[i,:]-MatingPool[i+<span class="number">1</span>,:])/<span class="number">2</span></span><br><span class="line">    Offspring = Offspring[<span class="number">0</span>:MaxOffspring,:]</span><br><span class="line">    <span class="keyword">if</span> MaxOffspring == <span class="number">1</span>:</span><br><span class="line">        MaxValue = Boundary[<span class="number">0</span>,:]</span><br><span class="line">        MinValue = Boundary[<span class="number">1</span>,:]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        MaxValue = np.tile(Boundary[<span class="number">0</span>,:],(MaxOffspring,<span class="number">1</span>))</span><br><span class="line">        MinValue = np.tile(Boundary[<span class="number">1</span>,:],(MaxOffspring,<span class="number">1</span>))</span><br><span class="line">    k = np.random.rand(MaxOffspring,D)</span><br><span class="line">    miu = np.random.rand(MaxOffspring,D)</span><br><span class="line">    Temp = (k&lt;=ProM)*(miu&lt;<span class="number">0.5</span>)</span><br><span class="line">    Offspring[Temp] = Offspring[Temp]+(MaxValue[Temp]-MinValue[Temp])*((<span class="number">2</span>*miu[Temp]+(<span class="number">1</span><span class="number">-2</span>*miu[Temp])*(<span class="number">1</span>-(Offspring[Temp]-MinValue[Temp])/(MaxValue[Temp]-MinValue[Temp]))**(DisM+<span class="number">1</span>))**(<span class="number">1</span>/(DisM+<span class="number">1</span>))<span class="number">-1</span>)</span><br><span class="line">    Temp = (k&lt;=ProM)*(miu&gt;=<span class="number">0.5</span>)</span><br><span class="line">    Offspring[Temp] = Offspring[Temp]+(MaxValue[Temp]-MinValue[Temp])*(<span class="number">1</span>-(<span class="number">2</span>*(<span class="number">1</span>-miu[Temp])+<span class="number">2</span>*(miu[Temp]<span class="number">-0.5</span>)*(<span class="number">1</span>-(MaxValue[Temp]-Offspring[Temp])/(MaxValue[Temp]-MinValue[Temp]))**(DisM+<span class="number">1</span>))**(<span class="number">1</span>/(DisM+<span class="number">1</span>)))</span><br><span class="line">    Offspring[Offspring&gt;MaxValue] = MaxValue[Offspring&gt;MaxValue]</span><br><span class="line">    Offspring[Offspring&lt;MinValue] = MinValue[Offspring&lt;MinValue]</span><br><span class="line">    <span class="keyword">return</span> Offspring</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">F_sort</span><span class="params">(FunctionValue)</span>:</span></span><br><span class="line">    Kind = <span class="number">2</span></span><br><span class="line">    N,M = FunctionValue.shape</span><br><span class="line">    MaxFront = <span class="number">0</span></span><br><span class="line">    cz = np.zeros(N)</span><br><span class="line">    FrontValue = np.zeros(N)+np.inf</span><br><span class="line">    Rank = FunctionValue.argsort(axis=<span class="number">0</span>)[:,<span class="number">0</span>]</span><br><span class="line">    FunctionValue = FunctionValue[np.lexsort(FunctionValue[:,::<span class="number">-1</span>].T)]</span><br><span class="line">    <span class="keyword">while</span> (Kind==<span class="number">1</span> <span class="keyword">and</span> np.sum(cz)&lt;N) <span class="keyword">or</span> (Kind==<span class="number">2</span> <span class="keyword">and</span> np.sum(cz)&lt;N/<span class="number">2</span>) <span class="keyword">or</span> (Kind==<span class="number">3</span> <span class="keyword">and</span> MaxFront&lt;<span class="number">1</span>):</span><br><span class="line">        MaxFront = MaxFront+<span class="number">1</span></span><br><span class="line">        d = deepcopy(cz)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(N):</span><br><span class="line">            <span class="keyword">if</span> d[i]==<span class="number">0</span>:</span><br><span class="line">                <span class="keyword">for</span> j <span class="keyword">in</span> range(i+<span class="number">1</span>,N):</span><br><span class="line">                    <span class="keyword">if</span> d[j]==<span class="number">0</span>:</span><br><span class="line">                        k = <span class="number">1</span></span><br><span class="line">                        <span class="keyword">for</span> m <span class="keyword">in</span> range(<span class="number">1</span>,M):</span><br><span class="line">                            <span class="keyword">if</span> FunctionValue[i,m] &gt; FunctionValue[j,m]:</span><br><span class="line">                                k = <span class="number">0</span></span><br><span class="line">                                <span class="keyword">break</span></span><br><span class="line">                        <span class="keyword">if</span> k == <span class="number">1</span>:</span><br><span class="line">                            d[j] = <span class="number">1</span></span><br><span class="line">                FrontValue[Rank[i]] = MaxFront</span><br><span class="line">                cz[i] = <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> FrontValue,MaxFront</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">F_choose</span><span class="params">(FunctionValue1,FunctionValue2,K,Z)</span>:</span></span><br><span class="line">    FunctionValue = np.concatenate([FunctionValue1,FunctionValue2])</span><br><span class="line">    N,M = FunctionValue.shape</span><br><span class="line">    N1 = FunctionValue1.shape[<span class="number">0</span>]</span><br><span class="line">    N2 = FunctionValue2.shape[<span class="number">0</span>]</span><br><span class="line">    NoZ = Z.shape[<span class="number">0</span>]</span><br><span class="line">    Zmin = np.min(FunctionValue,axis=<span class="number">0</span>) </span><br><span class="line">    Extreme = np.zeros(M)                 </span><br><span class="line">    w = np.zeros((M,M))+<span class="number">0.000001</span>+np.eye(M)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(M):                  </span><br><span class="line">        Extreme[i] = np.argmin(np.max(FunctionValue/np.tile(w[i,:],(N,<span class="number">1</span>)),axis=<span class="number">1</span>))</span><br><span class="line">    Hyperplane = np.linalg.lstsq(FunctionValue[Extreme.astype(<span class="string">'int'</span>),:],np.ones((M,<span class="number">1</span>)))[<span class="number">0</span>]</span><br><span class="line">    a = <span class="number">1</span>/Hyperplane       </span><br><span class="line">    <span class="keyword">if</span> np.any(np.isnan(a)):</span><br><span class="line">        a = np.max(FunctionValue,axis=<span class="number">0</span>).T</span><br><span class="line">    FunctionValue = (FunctionValue-np.tile(Zmin,(N,<span class="number">1</span>)))/(np.tile(a.T,(N,<span class="number">1</span>))-np.tile(Zmin,(N,<span class="number">1</span>)))</span><br><span class="line">    Distance = np.zeros((N,NoZ))   </span><br><span class="line">    normZ = np.sum(Z**<span class="number">2</span>,axis=<span class="number">1</span>)**<span class="number">0.5</span></span><br><span class="line">    normF = np.sum(FunctionValue**<span class="number">2</span>,axis=<span class="number">1</span>)**<span class="number">0.5</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(N):</span><br><span class="line">        normFZ = np.sum((np.tile(FunctionValue[i,:],(NoZ,<span class="number">1</span>))-Z)**<span class="number">2</span>,axis=<span class="number">1</span>)**<span class="number">0.5</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(NoZ):</span><br><span class="line">            S1 = normF[i]</span><br><span class="line">            S2 = normZ[j]</span><br><span class="line">            S3 = normFZ[j]</span><br><span class="line">            p = (S1+S2+S3)/<span class="number">2</span></span><br><span class="line">            Distance[i,j] = <span class="number">2</span>*np.sqrt(p*(p-S1)*(p-S2)*(p-S3))/S2</span><br><span class="line">    d = np.min(Distance.T,axis=<span class="number">0</span>)</span><br><span class="line">    pii = np.argmin(Distance.T,axis=<span class="number">0</span>) </span><br><span class="line">    rho = np.zeros(NoZ)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(N1):</span><br><span class="line">        rho[pii[i]] = rho[pii[i]]+<span class="number">1</span></span><br><span class="line">    Choose = np.zeros(N2)      </span><br><span class="line">    Zchoose = np.ones(NoZ)    </span><br><span class="line">    k = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> k &lt;= K:</span><br><span class="line">        Temp = np.argwhere(Zchoose==<span class="number">1</span>).ravel()</span><br><span class="line">        j = np.argmin(rho[Temp])</span><br><span class="line">        j = Temp[j]</span><br><span class="line">        I1 = (np.ravel(Choose)==<span class="number">0</span>).nonzero()</span><br><span class="line">        I2 = (np.ravel(pii[N1:])==j).nonzero()</span><br><span class="line">        I = np.intersect1d(I1,I2)</span><br><span class="line">        <span class="keyword">if</span> len(I)&gt;<span class="number">0</span>:</span><br><span class="line">            <span class="keyword">if</span> rho[j] == <span class="number">0</span>:</span><br><span class="line">                s = np.argmin(d[N1+I])</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                s = np.random.randint(len(I))</span><br><span class="line">            Choose[I[s]] = <span class="number">1</span></span><br><span class="line">            rho[j] = rho[j]+<span class="number">1</span></span><br><span class="line">            k = k+<span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            Zchoose[j] = <span class="number">0</span></span><br><span class="line">    <span class="keyword">return</span> Choose</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(Problem,M,Generations)</span>:</span></span><br><span class="line">    <span class="keyword">assert</span> M==<span class="number">2</span> <span class="keyword">or</span> M==<span class="number">3</span></span><br><span class="line">    p1 = [<span class="number">99</span>,<span class="number">13</span>,<span class="number">7</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">    p2 = [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>]</span><br><span class="line">    p1 = p1[M<span class="number">-2</span>]</span><br><span class="line">    p2 = p2[M<span class="number">-2</span>]</span><br><span class="line">    N,Z = F_weight(p1,p2,M)</span><br><span class="line">    Z[Z==<span class="number">0</span>] = <span class="number">0.000001</span></span><br><span class="line">    Population,Boundary = F_objective(<span class="string">'init'</span>,Problem,M,N)</span><br><span class="line">    plt.ion()</span><br><span class="line">    F = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">if</span> M==<span class="number">3</span>:</span><br><span class="line">        fig = plt.figure(figsize=plt.figaspect(<span class="number">0.5</span>))</span><br><span class="line">    <span class="keyword">for</span> Gene <span class="keyword">in</span> range(Generations): </span><br><span class="line">        MatingPool = F_mating(Population)</span><br><span class="line">        Offspring = F_generator(MatingPool,Boundary,N)</span><br><span class="line">        Population = np.concatenate([Population,Offspring])</span><br><span class="line">        FunctionValue = F_objective(<span class="string">'value'</span>,Problem,M,Population)[<span class="number">0</span>]</span><br><span class="line">        FrontValue,MaxFront = F_sort(deepcopy(FunctionValue))</span><br><span class="line">        Next = np.zeros(N)</span><br><span class="line">        NoN = np.count_nonzero(FrontValue[FrontValue&lt;MaxFront])</span><br><span class="line">        Next[:NoN] = (np.ravel(FrontValue.T)&lt;MaxFront).nonzero()[<span class="number">0</span>]</span><br><span class="line">        Last = (np.ravel(FrontValue.T)==MaxFront).nonzero()[<span class="number">0</span>]</span><br><span class="line">        c = Next[:NoN].astype(<span class="string">'int'</span>)</span><br><span class="line">        Choose = F_choose(FunctionValue[c,:],FunctionValue[Last,:],N-NoN,Z)</span><br><span class="line">        Next[NoN:N] = Last[Choose.astype(bool)]</span><br><span class="line">        Population = Population[Next.astype(<span class="string">'int'</span>),:]</span><br><span class="line">        F = F_objective(<span class="string">'value'</span>,Problem,M,Population)[<span class="number">0</span>]</span><br><span class="line">        plt.cla()</span><br><span class="line">        <span class="keyword">if</span> M==<span class="number">3</span>:</span><br><span class="line">            fig.suptitle(Problem+<span class="string">"   Generation="</span>+str(Gene+<span class="number">1</span>))</span><br><span class="line">            ax = fig.add_subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>, projection=<span class="string">'3d'</span>)</span><br><span class="line">            fig.delaxes(fig.axes[<span class="number">0</span>])</span><br><span class="line">            ax.scatter(F[:, <span class="number">0</span>], F[:, <span class="number">1</span>],F[:,<span class="number">2</span>], color=<span class="string">'b'</span>)</span><br><span class="line">            ax2 = fig.add_subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>, projection=<span class="string">'3d'</span>)</span><br><span class="line">            ax2.view_init(<span class="number">10</span>,<span class="number">50</span>)</span><br><span class="line">            ax2.scatter(F[:, <span class="number">0</span>], F[:, <span class="number">1</span>],F[:,<span class="number">2</span>], color=<span class="string">'b'</span>)</span><br><span class="line">            <span class="keyword">if</span> Gene==Generations<span class="number">-1</span>:</span><br><span class="line">                plt.ioff()</span><br><span class="line">                plt.show()</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                plt.pause(<span class="number">0.2</span>)</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            plt.title(Problem+<span class="string">"   Generation="</span>+str(Gene+<span class="number">1</span>))</span><br><span class="line">            plt.scatter(F[:,<span class="number">0</span>], F[:,<span class="number">1</span>], color=<span class="string">'b'</span>)</span><br><span class="line">            <span class="keyword">if</span> Gene==Generations<span class="number">-1</span>:</span><br><span class="line">                plt.ioff()</span><br><span class="line">                plt.scatter(F[:,<span class="number">0</span>], F[:,<span class="number">1</span>], color=<span class="string">'b'</span>)</span><br><span class="line">                plt.show()</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                plt.pause(<span class="number">0.2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    main(Problem=<span class="string">"DTLZ7"</span>, M=<span class="number">3</span>, Generations=<span class="number">500</span>)</span><br></pre></td></tr></table></figure></div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:wkx1996@foxmail.com">w.k.x.</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://shivakasu.cn/2018/12/28/work1/">https://shivakasu.cn/2018/12/28/work1/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://shivakasu.cn" target="_blank">SHIVAKASU</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Python/">Python</a></div><div class="post_share"><div class="social-share" data-image="http://file.shivakasu.cn/2f6de001e698ed5939de/arg.jpg" data-sites="facebook,twitter,wechat,weibo,qq,qzone,douban,google,linkedin"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><button class="reward-button"><i class="fas fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="https://file.shivakasu.cn/4a84dcfb31806db98b2a/wechat.png" alt="微信" onclick="window.open('https://file.shivakasu.cn/4a84dcfb31806db98b2a/wechat.png')"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="post-qr-code__img" src="https://file.shivakasu.cn/982f781ef31cbc46968b/alipay.jpg" alt="支付宝" onclick="window.open('https://file.shivakasu.cn/982f781ef31cbc46968b/alipay.jpg')"/><div class="post-qr-code__desc">支付宝</div></li></ul></div></button></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2019/01/18/mir0/"><img class="prev-cover" data-src="http://file.shivakasu.cn/431c4e80e82294b29130/mir.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">现代信息检索 Chapter 1：引言</div></div></a></div><div class="next-post pull-right"><a href="/2018/11/28/work0/"><img class="next-cover" data-src="https://file.shivakasu.cn/2f6de001e698ed5939de/arg.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Talent vs Luck 论文复现与分析</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2017/07/01/bugfix0/" title="解决 anaconda3 安装 xgboost：/usr/lib/libstdc++.so.6：version 'GLIBCXX_3.4.14' not found问题"><img class="relatedPosts_cover" data-src="http://file.shivakasu.cn/625f259cab2ac7f8e1c0/bugfix.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2017-07-01</div><div class="relatedPosts_title">解决 anaconda3 安装 xgboost：/usr/lib/libstdc++.so.6：version 'GLIBCXX_3.4.14' not found问题</div></div></a></div><div class="relatedPosts_item"><a href="/2016/10/07/bugfix2/" title="Ubuntu下安装scrapy遇到的问题及解决过程"><img class="relatedPosts_cover" data-src="http://file.shivakasu.cn/625f259cab2ac7f8e1c0/bugfix.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2016-10-07</div><div class="relatedPosts_title">Ubuntu下安装scrapy遇到的问题及解决过程</div></div></a></div><div class="relatedPosts_item"><a href="/2016/10/27/bugfix3/" title="Anaconda中关于Qt的bug"><img class="relatedPosts_cover" data-src="http://file.shivakasu.cn/625f259cab2ac7f8e1c0/bugfix.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2016-10-27</div><div class="relatedPosts_title">Anaconda中关于Qt的bug</div></div></a></div><div class="relatedPosts_item"><a href="/2019/02/04/fpy0/" title="流畅的Python Chapter 1：Python 数据模型"><img class="relatedPosts_cover" data-src="http://file.shivakasu.cn/ed83db4944a34b9070aa/fpy.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2019-02-04</div><div class="relatedPosts_title">流畅的Python Chapter 1：Python 数据模型</div></div></a></div><div class="relatedPosts_item"><a href="/2019/02/10/fpy3/" title="流畅的Python Chapter 5：一等函数"><img class="relatedPosts_cover" data-src="http://file.shivakasu.cn/ed83db4944a34b9070aa/fpy.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2019-02-10</div><div class="relatedPosts_title">流畅的Python Chapter 5：一等函数</div></div></a></div><div class="relatedPosts_item"><a href="/2019/02/06/fpy1/" title="流畅的Python Chapter 2：序列构成的数组"><img class="relatedPosts_cover" data-src="http://file.shivakasu.cn/ed83db4944a34b9070aa/fpy.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2019-02-06</div><div class="relatedPosts_title">流畅的Python Chapter 2：序列构成的数组</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var requestSetting = function (from,set) {
  var from = from
  var setting = set.split(',').filter(function(item){
  return from.indexOf(item) > -1
  });
  setting = setting.length == 0 ? from :setting;
  return setting
}

var guestInfo = requestSetting(['nick','mail','link'],'nick,mail,link')
var requiredFields = requestSetting(['nick','mail'],'nick,mail')

window.valine = new Valine({
  el:'#vcomment',
  appId: 'qIfwEiuSjlc5vyminB1rx2qX-gzGzoHsz',
  appKey: 'erfVXuW3AybzbWGqxSGxnBRp',
  placeholder: '来都来了，说点儿什么吧~',
  avatar: 'monsterid',
  meta: guestInfo,
  pageSize: '10',
  lang: 'zh-CN',
  recordIP: true,
  serverURLs: '',
  emojiCDN: '',
  emojiMaps: "",
  enableQQ: false,
  requiredFields: requiredFields
});</script></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By w.k.x.</div><div class="framework-info"><span>DrivenBy </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="icp"><a href="http://www.beian.miit.gov.cn/state/outPortal/loginPortal.action" target="_blank" rel="noopener"><img class="icp-icon" src="/img/icp.png"/><span>京ICP备19001969号-1</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><button id="readmode" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" title="缩小字体"><i class="fas fa-minus"></i></button><button class="translate_chn_to_cht" id="translateLink" title="简繁转换">繁</button><button id="darkmode" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" title="设置"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fas fa-comments"></i></a><button class="close" id="mobile-toc-button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js"></script><script>document.addEventListener('DOMContentLoaded', function() {
  pangu.autoSpacingPage()
})</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":false},"react":{"opacity":0.7},"log":false});</script></body></html>